import { Component, forwardRef, Input } from '@angular/core';
import { FormGroup, NG_VALUE_ACCESSOR } from '@angular/forms';
import { ERROR_TEXT_STUB } from '../../shared/label/label.component';
import * as i0 from "@angular/core";
import * as i1 from "@ngx-translate/core";
import * as i2 from "../../../shared/functions/stand-alone.functions";
import * as i3 from "@angular/common";
import * as i4 from "../../shared/label/label.component";
import * as i5 from "../error/error.component";
import * as i6 from "../select/select.component";
export const DATE_PICKER_MONTHS_EN = [
    'January',
    'February',
    'March',
    'April',
    'May',
    'June',
    'July',
    'August',
    'September',
    'October',
    'November',
    'December'
];
export const DATE_PICKER_MONTHS_FR = [
    'janvier',
    'février',
    'mars',
    'avril',
    'mai',
    'juin',
    'juillet',
    'août',
    'septembre',
    'octobre',
    'novembre',
    'décembre'
];
export const DATE_PICKER_DAY_CONTROL_ID_EXTENSION = '_dayControl';
export const DATE_PICKER_MONTH_CONTROL_ID_EXTENSION = '_monthControl';
export const DATE_PICKER_YEAR_CONTROL_ID_EXTENSION = '_yearControl';
export const DATE_PICKER_LABELS_EN = ['Day', 'Month', 'Year'];
export const DATE_PICKER_LABELS_FR = ['Jour', 'Mois', 'Année'];
export const DATE_PICKER_PLACEHOLDER_YEAR_EN = 'YYYY';
export const DATE_PICKER_PLACEHOLDER_YEAR_FR = 'AAAA';
export const DATE_PICKER_PLACEHOLDER_MONTH_EN = 'Month';
export const DATE_PICKER_PLACEHOLDER_MONTH_FR = 'Mois';
export const DATE_PICKER_PLACEHOLDER_DAY_EN = 'DD';
export const DATE_PICKER_PLACEHOLDER_DAY_FR = 'JJ';
export const DATE_PICKER_UNKOWN_EN = 'Unknown';
export const DATE_PICKER_UNKOWN_FR = 'Inconnu';
export class DatePickerComponent {
    constructor(translate, standAloneFunctions) {
        this.translate = translate;
        this.standAloneFunctions = standAloneFunctions;
        this.formGroupEmpty = new FormGroup({});
        this.config = {
            id: '',
            formGroup: new FormGroup({})
        };
        this.formGroup = this.formGroupEmpty;
        this.yearSelectShow = true;
        this.monthSelectShow = true;
        this.daySelectShow = true;
        this.errorIds = [];
        this.days = [];
        this.months = [];
        this.labelConfig = {
            formGroup: this.config.formGroup,
            parentID: ''
        };
        this.touched = false;
        this.errorStubText = '';
        this.dropDownConfigs = {
            day: {
                id: '',
                formGroup: this.config.formGroup,
                label: '',
                options: [],
                size: 'large',
                disableError: true
            },
            month: {
                id: '',
                formGroup: this.config.formGroup,
                label: '',
                options: [],
                size: 'large',
                disableError: true
            },
            year: {
                id: '',
                formGroup: this.config.formGroup,
                label: '',
                options: [],
                size: 'large',
                disableError: true
            }
        };
        this.yearSelect = '';
        this.monthSelect = '';
        this.daySelect = '';
        //Get the current year for use in the year dropdown
        this.currentYear = new Date().getFullYear();
        this.onTouch = () => {
            if (this.formGroup?.get(this.config.id)?.touched === false) {
                this.formGroup?.get(this.config.id)?.markAsTouched();
            }
        };
        this.onChange = (value) => {
            this.config.formGroup.get(this.config.id)?.setValue(value);
        };
    }
    ngOnInit() {
        this.labelConfig = this.standAloneFunctions.makeLabelConfig(this.config.formGroup, this.config.id, this.config.errorMessages, this.config.label, this.config.desc, this.config.hint, this.config.required, this.config.labelIconConfig);
        //set config from individual options, if present
        if (this.formGroup !== this.formGroupEmpty) {
            this.config.formGroup = this.formGroup;
        }
        ;
        if (this.id)
            this.config.id = this.id;
        if (this.size)
            this.config.size = this.size;
        if (this.label)
            this.config.label = this.label;
        if (this.required)
            this.config.required = this.required;
        if (this.hint)
            this.config.hint = this.hint;
        if (this.desc)
            this.config.desc = this.desc;
        if (this.errorMessages)
            this.config.errorMessages = this.errorMessages;
        if (this.maxYear)
            this.config.maxYear = this.maxYear;
        if (this.minYear)
            this.config.minYear = this.minYear;
        if (this.unknownDateToggle)
            this.config.unknownDateToggle = this.unknownDateToggle;
        if (this.yearSelectShow)
            this.config.yearSelectShow = this.yearSelectShow;
        if (this.monthSelectShow)
            this.config.monthSelectShow = this.monthSelectShow;
        if (this.daySelectShow)
            this.config.daySelectShow = this.daySelectShow;
        //Set the ids for the dropdowns
        this.dropDownConfigs.day.id =
            this.config.id + DATE_PICKER_DAY_CONTROL_ID_EXTENSION;
        this.dropDownConfigs.month.id =
            this.config.id + DATE_PICKER_MONTH_CONTROL_ID_EXTENSION;
        this.dropDownConfigs.year.id =
            this.config.id + DATE_PICKER_YEAR_CONTROL_ID_EXTENSION;
        this.dropDownConfigs.day.formGroup = this.config.formGroup;
        this.dropDownConfigs.month.formGroup = this.config.formGroup;
        this.dropDownConfigs.year.formGroup = this.config.formGroup;
        this.dropDownConfigs.day.size = this.config.size;
        this.dropDownConfigs.month.size = this.config.size;
        this.dropDownConfigs.year.size = this.config.size;
        if (this.config.errorMessages) {
            this.errorIds = this.standAloneFunctions.getErrorIds(this.config.formGroup, this.config.id + DATE_PICKER_YEAR_CONTROL_ID_EXTENSION, this.config.errorMessages);
        }
        // Populate the months and years arrays
        this.setMonthsLanguage();
        this.setLabelLanguage();
        this.translate.onLangChange.subscribe(() => {
            this.setMonthsLanguage();
            this.setYearDayLanguage();
            this.setLabelLanguage();
            this.getAriaOverride();
        });
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            if (this.config.unknownDateToggle?.yearUnknown)
                this.dropDownConfigs.year.options?.push({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
        }
        else {
            if (this.config.unknownDateToggle?.yearUnknown)
                this.dropDownConfigs.year.options?.push({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
        }
        if (this.config.minYear || this.config.maxYear) {
            if (this.config.minYear && this.config.maxYear) {
                for (let i = this.config.minYear; i <= this.config.maxYear; i++) {
                    this.dropDownConfigs.year.options?.push({ text: i.toString() });
                }
            }
            else if (this.config.minYear && !this.config.maxYear) {
                for (let i = this.config.minYear; i <= this.currentYear; i++) {
                    this.dropDownConfigs.year.options?.push({ text: i.toString() });
                }
            }
            else if (this.config.maxYear && !this.config.minYear) {
                for (let i = 1900; i <= this.config.maxYear; i++) {
                    this.dropDownConfigs.year.options?.push({ text: i.toString() });
                }
            }
        }
        else {
            for (let i = 1900; i <= this.currentYear; i++) {
                this.dropDownConfigs.year.options?.push({ text: i.toString() });
            }
        }
        // Populate the days array based on the selected month and year
        this.config.formGroup
            .get(this.config.id + DATE_PICKER_MONTH_CONTROL_ID_EXTENSION)
            ?.valueChanges.subscribe((month) => {
            //add if statement here - the value of year can be empty, since it may not have been selected yet.
            const numDays = this.updateDaysArray(month, this.config.formGroup.get(this.config.id + '_yearControl')?.value);
        });
        this.config.formGroup
            .get(this.config.id + DATE_PICKER_YEAR_CONTROL_ID_EXTENSION)
            ?.valueChanges.subscribe((year) => {
            const numDays = this.updateDaysArray(this.config.formGroup.get(this.config.id + DATE_PICKER_MONTH_CONTROL_ID_EXTENSION)?.value, year);
        });
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.push({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
        }
        else {
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.push({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
        }
        if ((this.config.unknownDateToggle?.dayUnknown &&
            this.dropDownConfigs.day.options?.length === 1) ||
            (!this.config.unknownDateToggle?.dayUnknown &&
                this.dropDownConfigs.day.options?.length === 0)) {
            for (let i = 1; i <= 31; i++) {
                this.dropDownConfigs.day.options?.push({ text: i.toString() });
            }
        }
    }
    ngOnChanges() {
        this.labelConfig = this.standAloneFunctions.makeLabelConfig(this.config.formGroup, this.config.id, [], this.config.label, this.config.desc, this.config.hint, this.config.required, this.config.labelIconConfig);
        this.dropDownConfigs.day.size = this.config.size;
        this.dropDownConfigs.month.size = this.config.size;
        this.dropDownConfigs.year.size = this.config.size;
    }
    ngAfterViewInit() {
        this.yearSelect = document.getElementById(this.dropDownConfigs.year.id);
        this.monthSelect = document.getElementById(this.dropDownConfigs.month.id);
        this.daySelect = document.getElementById(this.dropDownConfigs.day.id);
        this.getAriaOverride();
    }
    /**
     * Set the language for dropdown options
     * TODO: Set value of each month to be the lov and not the text
     */
    setMonthsLanguage() {
        this.dropDownConfigs.month.options = [];
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            this.months = DATE_PICKER_MONTHS_EN;
            if (this.config.unknownDateToggle?.monthUnknown)
                this.dropDownConfigs.month.options?.push({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
        }
        else {
            this.months = DATE_PICKER_MONTHS_FR;
            if (this.config.unknownDateToggle?.monthUnknown)
                this.dropDownConfigs.month.options?.push({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
        }
        this.months.forEach((month, index) => {
            this.dropDownConfigs.month.options?.push({
                text: month,
                value: (index + 1).toString().padStart(2, '0')
            });
        });
    }
    /**
     * Used to set the language of year/day 'unknown' field when langauge changes
     */
    setYearDayLanguage() {
        this.dropDownConfigs.day.options?.shift();
        this.dropDownConfigs.year.options?.shift();
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            this.months = DATE_PICKER_MONTHS_EN;
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.unshift({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
            if (this.config.unknownDateToggle?.yearUnknown)
                this.dropDownConfigs.year.options?.unshift({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
        }
        else {
            this.months = DATE_PICKER_MONTHS_FR;
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.unshift({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
            if (this.config.unknownDateToggle?.yearUnknown)
                this.dropDownConfigs.year.options?.unshift({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
        }
    }
    /**
     * Set the language for the labels of each dropdown
     */
    setLabelLanguage() {
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            this.dropDownConfigs.day.label = DATE_PICKER_LABELS_EN[0];
            this.dropDownConfigs.month.label = DATE_PICKER_LABELS_EN[1];
            this.dropDownConfigs.year.label = DATE_PICKER_LABELS_EN[2];
            this.dropDownConfigs.day.placeholder = DATE_PICKER_PLACEHOLDER_DAY_EN;
            this.dropDownConfigs.month.placeholder = DATE_PICKER_PLACEHOLDER_MONTH_EN;
            this.dropDownConfigs.year.placeholder = DATE_PICKER_PLACEHOLDER_YEAR_EN;
            this.errorStubText = ERROR_TEXT_STUB.en;
        }
        else {
            this.dropDownConfigs.day.label = DATE_PICKER_LABELS_FR[0];
            this.dropDownConfigs.month.label = DATE_PICKER_LABELS_FR[1];
            this.dropDownConfigs.year.label = DATE_PICKER_LABELS_FR[2];
            this.dropDownConfigs.day.placeholder = DATE_PICKER_PLACEHOLDER_DAY_FR;
            this.dropDownConfigs.month.placeholder = DATE_PICKER_PLACEHOLDER_MONTH_FR;
            this.dropDownConfigs.year.placeholder = DATE_PICKER_PLACEHOLDER_YEAR_FR;
            this.errorStubText = ERROR_TEXT_STUB.fr;
        }
    }
    /**
     * update the days array with the correct number of days based on the year and the month
     * @param month string of the month (TODO: Change this to be an LOV)
     * @param year year selected
     */
    updateDaysArray(month, year) {
        this.days = [];
        this.dropDownConfigs.day.options = [];
        const numDays = this.getNumDaysInMonth(month, year);
        for (let i = 1; i <= numDays; i++) {
            this.days.push(i);
        }
        this.config.formGroup
            .get(this.config.id + DATE_PICKER_DAY_CONTROL_ID_EXTENSION)
            ?.setValue('');
        if (this.translate.currentLang === 'en' ||
            this.translate.currentLang === 'en-US') {
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.push({
                    text: DATE_PICKER_UNKOWN_EN,
                    value: '**'
                });
        }
        else {
            if (this.config.unknownDateToggle?.dayUnknown)
                this.dropDownConfigs.day.options?.push({
                    text: DATE_PICKER_UNKOWN_FR,
                    value: '**'
                });
        }
        this.days.forEach((day) => {
            this.dropDownConfigs.day.options?.push({ text: day.toString() });
        });
    }
    /**
     * Get the number of days in the month based on the month and year
     * @param month string of the month selected
     * @param year number selected
     * @returns number representing the number of days in the month
     */
    getNumDaysInMonth(month, year) {
        const monthNum = +month;
        if (monthNum === 2) {
            if (String(year) === '**') {
                //if year is unknown and month is feb return 29
                return 29;
            }
            return this.isLeapYear(year) ? 29 : 28;
        }
        else if ([4, 6, 9, 11].includes(monthNum)) {
            return 30;
        }
        else {
            return 31;
        }
    }
    /**
     * Check if the year is a leap year
     * @param year number representing the year
     * @returns true if a leap year, false otherwise
     */
    isLeapYear(year) {
        if (year % 4 === 0) {
            if (year % 100 === 0) {
                return year % 400 === 0;
            }
            return true;
        }
        return false;
    }
    getDatePickerTouchedOrInvalid() {
        let datePickerState = false;
        datePickerState =
            (this.config.formGroup.get(this.dropDownConfigs.year.id)?.touched &&
                this.config.formGroup.get(this.dropDownConfigs.year.id)?.invalid) ||
                (this.config.formGroup.get(this.dropDownConfigs.month.id)?.touched &&
                    this.config.formGroup.get(this.dropDownConfigs.month.id)?.invalid) ||
                (this.config.formGroup.get(this.dropDownConfigs.day.id)?.touched &&
                    this.config.formGroup.get(this.dropDownConfigs.day.id)?.invalid);
        this.touched = datePickerState || false;
        this.getAriaOverride(datePickerState);
        return datePickerState ?? false;
        //  return this.config.formGroup?.touched && this.config.formGroup?.invalid;
    }
    /**
     * Override the aria labels for each of the select fields in the date picker
     * @param hasError is the field in error?
     */
    getAriaOverride(hasError) {
        if (this.yearSelect !== '') {
            if (hasError &&
                this.config.formGroup.get(this.dropDownConfigs.year.id)?.touched &&
                this.config.formGroup.get(this.dropDownConfigs.year.id)?.invalid) {
                this.yearSelect?.setAttribute('aria-label', this.getLabelCore() +
                    this.dropDownConfigs.year.label +
                    ' ' +
                    this.getErrorAria());
            }
            else {
                this.yearSelect?.setAttribute('aria-label', this.getLabelCore() + this.dropDownConfigs.year.label);
            }
        }
        if (this.monthSelect !== '') {
            if (hasError &&
                this.config.formGroup.get(this.dropDownConfigs.month.id)?.touched &&
                this.config.formGroup.get(this.dropDownConfigs.month.id)?.invalid) {
                this.monthSelect?.setAttribute('aria-label', this.getLabelCore() +
                    this.dropDownConfigs.month.label +
                    ' ' +
                    this.getErrorAria());
            }
            else {
                this.monthSelect?.setAttribute('aria-label', this.getLabelCore() + this.dropDownConfigs.month.label);
            }
        }
        if (this.daySelect !== '') {
            if (hasError &&
                this.config.formGroup.get(this.dropDownConfigs.day.id)?.touched &&
                this.config.formGroup.get(this.dropDownConfigs.day.id)?.invalid) {
                this.daySelect?.setAttribute('aria-label', this.getLabelCore() +
                    this.dropDownConfigs.day.label +
                    ' ' +
                    this.getErrorAria());
            }
            else {
                this.daySelect?.setAttribute('aria-label', this.getLabelCore() + this.dropDownConfigs.day.label);
            }
        }
    }
    /**
     * Generates a core string of the label (date picker label, description, and hint) for aria text
     * @returns label core text translated string
     */
    getLabelCore() {
        let labelCore = '';
        if (this.config.label)
            labelCore += this.translate.instant(this.config.label) + ' ';
        if (this.config.desc)
            labelCore += this.translate.instant(this.config.desc) + ' ';
        if (this.config.hint)
            labelCore += this.translate.instant(this.config.hint) + ' ';
        return labelCore;
    }
    /**
     * Generates the translated error string for aria text
     * @returns errors text translated string
     */
    getErrorAria() {
        let errors = '';
        this.errorIds.forEach((error) => {
            errors += this.translate.instant(error.errorLOV) + ' ';
        });
        return errors;
    }
    changeValue(event) {
        this.writeValue(event.srcElement.value);
        this.onTouch();
    }
    writeValue(value) {
        this.onChange(value);
    }
    registerOnChange(fn) {
        this.config.formGroup.valueChanges.subscribe(fn);
    }
    registerOnTouched(fn) {
        this.onTouch = fn;
    }
    /**
     * Apply a disabled state
     */
    setDisabledState(isDisabled) {
        if (isDisabled) {
            this.formGroup?.get(this.config.id)?.disable();
        }
        else {
            this.formGroup?.get(this.config.id)?.enable();
        }
    }
}
DatePickerComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: DatePickerComponent, deps: [{ token: i1.TranslateService }, { token: i2.StandAloneFunctions }], target: i0.ɵɵFactoryTarget.Component });
DatePickerComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.12", type: DatePickerComponent, selector: "ircc-cl-lib-date-picker", inputs: { config: "config", formGroup: "formGroup", id: "id", size: "size", label: "label", required: "required", hint: "hint", desc: "desc", errorMessages: "errorMessages", maxYear: "maxYear", minYear: "minYear", unknownDateToggle: "unknownDateToggle", yearSelectShow: "yearSelectShow", monthSelectShow: "monthSelectShow", daySelectShow: "daySelectShow" }, providers: [
        {
            provide: NG_VALUE_ACCESSOR,
            useExisting: forwardRef(() => DatePickerComponent),
            multi: true
        }
    ], usesOnChanges: true, ngImport: i0, template: "<div class=\"{{ config.size }}\">\n  <ircc-cl-lib-label\n    [config]=\"labelConfig\"\n    [attr.size]=\"config.size\"\n  ></ircc-cl-lib-label>\n  <fieldset class=\"all-select-container\">\n    <ircc-cl-lib-select\n      class=\"select-year\"\n      [attr.aria-live]=\"'off'\"\n      [config]=\"dropDownConfigs.year\"\n      *ngIf=\"config.yearSelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n    <ircc-cl-lib-select\n      class=\"select-month\"\n      [config]=\"dropDownConfigs.month\"\n      *ngIf=\"config.monthSelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n    <ircc-cl-lib-select\n      class=\"select-day\"\n      [config]=\"dropDownConfigs.day\"\n      *ngIf=\"config.daySelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n  </fieldset>\n  <div aria-live=\"polite\">\n    <ng-container *ngIf=\"getDatePickerTouchedOrInvalid()\">\n      <span class=\"sr-only\">{{\n        errorStubText + ': ' + (config.label || '' | translate) + ': '\n      }}</span>\n      <!-- TODO: Do something clever here to add which of the dropdowns are in error and put them in the above p tag -->\n      <ng-container *ngFor=\"let errors of errorIds; let i = index\">\n        <div\n          *ngIf=\"config.formGroup.get(dropDownConfigs.year.id)?.errors?.[errors.key] || config.formGroup.get(dropDownConfigs.month.id)?.errors?.[errors.key] || config.formGroup.get(dropDownConfigs.day.id)?.errors?.[errors.key]\"\n          class=\"radio-errors\"\n        >\n          <ircc-cl-lib-error\n            [id]=\"errors.id\"\n            [errorLOV]=\"errors.errorLOV\"\n            [size]=\"config.size\"\n          ></ircc-cl-lib-error>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i3.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i3.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i4.LabelComponent, selector: "ircc-cl-lib-label", inputs: ["config", "formGroup", "errorMessages", "parentID", "label", "desc", "hint", "required", "iconButton", "topLabel", "touched", "legend"] }, { kind: "component", type: i5.ErrorComponent, selector: "ircc-cl-lib-error", inputs: ["config", "id", "errorLOV", "icon", "size"] }, { kind: "component", type: i6.SelectComponent, selector: "ircc-cl-lib-select", inputs: ["config", "id", "formGroup", "size", "label", "desc", "hint", "placeholder", "required", "options", "errorMessages", "disableError"] }, { kind: "pipe", type: i1.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: DatePickerComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ircc-cl-lib-date-picker', providers: [
                        {
                            provide: NG_VALUE_ACCESSOR,
                            useExisting: forwardRef(() => DatePickerComponent),
                            multi: true
                        }
                    ], template: "<div class=\"{{ config.size }}\">\n  <ircc-cl-lib-label\n    [config]=\"labelConfig\"\n    [attr.size]=\"config.size\"\n  ></ircc-cl-lib-label>\n  <fieldset class=\"all-select-container\">\n    <ircc-cl-lib-select\n      class=\"select-year\"\n      [attr.aria-live]=\"'off'\"\n      [config]=\"dropDownConfigs.year\"\n      *ngIf=\"config.yearSelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n    <ircc-cl-lib-select\n      class=\"select-month\"\n      [config]=\"dropDownConfigs.month\"\n      *ngIf=\"config.monthSelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n    <ircc-cl-lib-select\n      class=\"select-day\"\n      [config]=\"dropDownConfigs.day\"\n      *ngIf=\"config.daySelectShow\"\n      (change)=\"changeValue($event)\"\n    ></ircc-cl-lib-select>\n  </fieldset>\n  <div aria-live=\"polite\">\n    <ng-container *ngIf=\"getDatePickerTouchedOrInvalid()\">\n      <span class=\"sr-only\">{{\n        errorStubText + ': ' + (config.label || '' | translate) + ': '\n      }}</span>\n      <!-- TODO: Do something clever here to add which of the dropdowns are in error and put them in the above p tag -->\n      <ng-container *ngFor=\"let errors of errorIds; let i = index\">\n        <div\n          *ngIf=\"config.formGroup.get(dropDownConfigs.year.id)?.errors?.[errors.key] || config.formGroup.get(dropDownConfigs.month.id)?.errors?.[errors.key] || config.formGroup.get(dropDownConfigs.day.id)?.errors?.[errors.key]\"\n          class=\"radio-errors\"\n        >\n          <ircc-cl-lib-error\n            [id]=\"errors.id\"\n            [errorLOV]=\"errors.errorLOV\"\n            [size]=\"config.size\"\n          ></ircc-cl-lib-error>\n        </div>\n      </ng-container>\n    </ng-container>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.TranslateService }, { type: i2.StandAloneFunctions }]; }, propDecorators: { config: [{
                type: Input
            }], formGroup: [{
                type: Input
            }], id: [{
                type: Input
            }], size: [{
                type: Input
            }], label: [{
                type: Input
            }], required: [{
                type: Input
            }], hint: [{
                type: Input
            }], desc: [{
                type: Input
            }], errorMessages: [{
                type: Input
            }], maxYear: [{
                type: Input
            }], minYear: [{
                type: Input
            }], unknownDateToggle: [{
                type: Input
            }], yearSelectShow: [{
                type: Input
            }], monthSelectShow: [{
                type: Input
            }], daySelectShow: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiZGF0ZS1waWNrZXIuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vY29tcG9uZW50LWxpYi9zcmMvbGliL2Zvcm0tY29tcG9uZW50cy9kYXRlLXBpY2tlci9kYXRlLXBpY2tlci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnQtbGliL3NyYy9saWIvZm9ybS1jb21wb25lbnRzL2RhdGUtcGlja2VyL2RhdGUtcGlja2VyLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQUUsVUFBVSxFQUFFLEtBQUssRUFBVSxNQUFNLGVBQWUsQ0FBQztBQUNyRSxPQUFPLEVBQUUsU0FBUyxFQUFFLGlCQUFpQixFQUFFLE1BQU0sZ0JBQWdCLENBQUM7QUFHOUQsT0FBTyxFQUNMLGVBQWUsRUFHaEIsTUFBTSxvQ0FBb0MsQ0FBQzs7Ozs7Ozs7QUFRNUMsTUFBTSxDQUFDLE1BQU0scUJBQXFCLEdBQUc7SUFDbkMsU0FBUztJQUNULFVBQVU7SUFDVixPQUFPO0lBQ1AsT0FBTztJQUNQLEtBQUs7SUFDTCxNQUFNO0lBQ04sTUFBTTtJQUNOLFFBQVE7SUFDUixXQUFXO0lBQ1gsU0FBUztJQUNULFVBQVU7SUFDVixVQUFVO0NBQ1gsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLHFCQUFxQixHQUFHO0lBQ25DLFNBQVM7SUFDVCxTQUFTO0lBQ1QsTUFBTTtJQUNOLE9BQU87SUFDUCxLQUFLO0lBQ0wsTUFBTTtJQUNOLFNBQVM7SUFDVCxNQUFNO0lBQ04sV0FBVztJQUNYLFNBQVM7SUFDVCxVQUFVO0lBQ1YsVUFBVTtDQUNYLENBQUM7QUFFRixNQUFNLENBQUMsTUFBTSxvQ0FBb0MsR0FBRyxhQUFhLENBQUM7QUFDbEUsTUFBTSxDQUFDLE1BQU0sc0NBQXNDLEdBQUcsZUFBZSxDQUFDO0FBQ3RFLE1BQU0sQ0FBQyxNQUFNLHFDQUFxQyxHQUFH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QUFLO2dCQUNHLGVBQWU7c0JBQXZCLEtBQUs7Z0JBQ0csYUFBYTtzQkFBckIsS0FBSyIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCB7IENvbXBvbmVudCwgZm9yd2FyZFJlZiwgSW5wdXQsIE9uSW5pdCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwLCBOR19WQUxVRV9BQ0NFU1NPUiB9IGZyb20gJ0Bhbmd1bGFyL2Zvcm1zJztcbmltcG9ydCB7IFRyYW5zbGF0ZVNlcnZpY2UgfSBmcm9tICdAbmd4LXRyYW5zbGF0ZS9jb3JlJztcbmltcG9ydCB7IElTZWxlY3RDb25maWcgfSBmcm9tICcuLi9zZWxlY3Qvc2VsZWN0LmNvbXBvbmVudCc7XG5pbXBvcnQge1xuICBFUlJPUl9URVhUX1NUVUIsXG4gIElMYWJlbENvbmZpZyxcbiAgSUxhYmVsSWNvbkNvbmZpZ1xufSBmcm9tICcuLi8uLi9zaGFyZWQvbGFiZWwvbGFiZWwuY29tcG9uZW50JztcbmltcG9ydCB7IElFcnJvclBhaXJzIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvY29tcG9uZW50LWNvbmZpZ3MnO1xuaW1wb3J0IHsgRFNTaXplcyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9jb25zdGFudHMvamwtY29tcG9uZW50cy5jb25zdGFudHMnO1xuaW1wb3J0IHtcbiAgSUVycm9ySURzLFxuICBTdGFuZEFsb25lRnVuY3Rpb25zXG59IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9mdW5jdGlvbnMvc3RhbmQtYWxvbmUuZnVuY3Rpb25zJztcblxuZXhwb3J0IGNvbnN0IERBVEVfUElDS0VSX01PTlRIU19FTiA9IFtcbiAgJ0phbnVhcnknLFxuICAnRmVicnVhcnknLFxuICAnTWFyY2gnLFxuICAnQXByaWwnLFxuICAnTWF5JyxcbiAgJ0p1bmUnLFxuICAnSnVseScsXG4gICdBdWd1c3QnLFxuICAnU2VwdGVtYmVyJyxcbiAgJ09jdG9iZXInLFxuICAnTm92ZW1iZXInLFxuICAnRGVjZW1iZXInXG5dO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfTU9OVEhTX0ZSID0gW1xuICAnamFudmllcicsXG4gICdmw6l2cmllcicsXG4gICdtYXJzJyxcbiAgJ2F2cmlsJyxcbiAgJ21haScsXG4gICdqdWluJyxcbiAgJ2p1aWxsZXQnLFxuICAnYW/Du3QnLFxuICAnc2VwdGVtYnJlJyxcbiAgJ29jdG9icmUnLFxuICAnbm92ZW1icmUnLFxuICAnZMOpY2VtYnJlJ1xuXTtcblxuZXhwb3J0IGNvbnN0IERBVEVfUElDS0VSX0RBWV9DT05UUk9MX0lEX0VYVEVOU0lPTiA9ICdfZGF5Q29udHJvbCc7XG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfTU9OVEhfQ09OVFJPTF9JRF9FWFRFTlNJT04gPSAnX21vbnRoQ29udHJvbCc7XG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfWUVBUl9DT05UUk9MX0lEX0VYVEVOU0lPTiA9ICdfeWVhckNvbnRyb2wnO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfTEFCRUxTX0VOID0gWydEYXknLCAnTW9udGgnLCAnWWVhciddO1xuZXhwb3J0IGNvbnN0IERBVEVfUElDS0VSX0xBQkVMU19GUiA9IFsnSm91cicsICdNb2lzJywgJ0FubsOpZSddO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfUExBQ0VIT0xERVJfWUVBUl9FTiA9ICdZWVlZJztcbmV4cG9ydCBjb25zdCBEQVRFX1BJQ0tFUl9QTEFDRUhPTERFUl9ZRUFSX0ZSID0gJ0FBQUEnO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfUExBQ0VIT0xERVJfTU9OVEhfRU4gPSAnTW9udGgnO1xuZXhwb3J0IGNvbnN0IERBVEVfUElDS0VSX1BMQUNFSE9MREVSX01PTlRIX0ZSID0gJ01vaXMnO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfUExBQ0VIT0xERVJfREFZX0VOID0gJ0REJztcbmV4cG9ydCBjb25zdCBEQVRFX1BJQ0tFUl9QTEFDRUhPTERFUl9EQVlfRlIgPSAnSkonO1xuXG5leHBvcnQgY29uc3QgREFURV9QSUNLRVJfVU5LT1dOX0VOID0gJ1Vua25vd24nO1xuZXhwb3J0IGNvbnN0IERBVEVfUElDS0VSX1VOS09XTl9GUiA9ICdJbmNvbm51JztcblxuZXhwb3J0IGludGVyZmFjZSBJRGF0ZVBpY2tlckNvbmZpZyB7XG4gIGlkOiBzdHJpbmc7XG4gIGZvcm1Hcm91cDogRm9ybUdyb3VwO1xuICBzaXplPzoga2V5b2YgdHlwZW9mIERTU2l6ZXM7XG4gIGxhYmVsPzogc3RyaW5nO1xuICByZXF1aXJlZD86IGJvb2xlYW47XG4gIGhpbnQ/OiBzdHJpbmc7XG4gIGRlc2M/OiBzdHJpbmc7XG4gIGVycm9yTWVzc2FnZXM/OiBJRXJyb3JQYWlyc1tdO1xuICBsYWJlbEljb25Db25maWc/OiBJTGFiZWxJY29uQ29uZmlnO1xuICBtYXhZZWFyPzogbnVtYmVyO1xuICBtaW5ZZWFyPzogbnVtYmVyO1xuICB1bmtub3duRGF0ZVRvZ2dsZT86IElEYXRlUGlja2VyVW5rbm93bkRhdGVUb2dnbGVDb25maWc7XG4gIHllYXJTZWxlY3RTaG93PzogYm9vbGVhbjtcbiAgbW9udGhTZWxlY3RTaG93PzogYm9vbGVhbjtcbiAgZGF5U2VsZWN0U2hvdz86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURhdGVQaWNrZXJVbmtub3duRGF0ZVRvZ2dsZUNvbmZpZyB7XG4gIGRheVVua25vd24/OiBib29sZWFuO1xuICBtb250aFVua25vd24/OiBib29sZWFuO1xuICB5ZWFyVW5rbm93bj86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSURhdGVQaWNrZXJEcm9wRG93bkNvbmZpZ3Mge1xuICBkYXk6IElTZWxlY3RDb25maWc7XG4gIG1vbnRoOiBJU2VsZWN0Q29uZmlnO1xuICB5ZWFyOiBJU2VsZWN0Q29uZmlnO1xufVxuXG5AQ29tcG9uZW50KHtcbiAgc2VsZWN0b3I6ICdpcmNjLWNsLWxpYi1kYXRlLXBpY2tlcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9kYXRlLXBpY2tlci5jb21wb25lbnQuaHRtbCcsXG4gIHByb3ZpZGVyczogW1xuICAgIHtcbiAgICAgIHByb3ZpZGU6IE5HX1ZBTFVFX0FDQ0VTU09SLFxuICAgICAgdXNlRXhpc3Rpbmc6IGZvcndhcmRSZWYoKCkgPT4gRGF0ZVBpY2tlckNvbXBvbmVudCksXG4gICAgICBtdWx0aTogdHJ1ZVxuICAgIH1cbiAgXVxufSlcbmV4cG9ydCBjbGFzcyBEYXRlUGlja2VyQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0IHtcblxuICBmb3JtR3JvdXBFbXB0eTogRm9ybUdyb3VwID0gbmV3IEZvcm1Hcm91cCh7fSk7XG5cbiAgQElucHV0KCkgY29uZmlnOiBJRGF0ZVBpY2tlckNvbmZpZyA9IHtcbiAgICBpZDogJycsXG4gICAgZm9ybUdyb3VwOiBuZXcgRm9ybUdyb3VwKHt9KVxuICB9O1xuXG4gIEBJbnB1dCgpIGZvcm1Hcm91cCA9IHRoaXMuZm9ybUdyb3VwRW1wdHk7XG4gIEBJbnB1dCgpIGlkPzogc3RyaW5nO1xuICBASW5wdXQoKSBzaXplPzoga2V5b2YgdHlwZW9mIERTU2l6ZXM7XG4gIEBJbnB1dCgpIGxhYmVsPzogc3RyaW5nO1xuICBASW5wdXQoKSByZXF1aXJlZD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIGhpbnQ/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGRlc2M/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGVycm9yTWVzc2FnZXM/OiBJRXJyb3JQYWlyc1tdO1xuICBASW5wdXQoKSBtYXhZZWFyPzogbnVtYmVyO1xuICBASW5wdXQoKSBtaW5ZZWFyPzogbnVtYmVyO1xuICBASW5wdXQoKSB1bmtub3duRGF0ZVRvZ2dsZT86IElEYXRlUGlja2VyVW5rbm93bkRhdGVUb2dnbGVDb25maWc7XG4gIEBJbnB1dCgpIHllYXJTZWxlY3RTaG93PzogYm9vbGVhbj0gdHJ1ZVxuICBASW5wdXQoKSBtb250aFNlbGVjdFNob3c/OiBib29sZWFuID0gdHJ1ZTtcbiAgQElucHV0KCkgZGF5U2VsZWN0U2hvdz86IGJvb2xlYW49IHRydWU7XG5cbiAgZXJyb3JJZHM6IElFcnJvcklEc1tdID0gW107XG4gIGRheXM6IG51bWJlcltdID0gW107XG4gIG1vbnRoczogc3RyaW5nW10gPSBbXTtcbiAgbGFiZWxDb25maWc6IElMYWJlbENvbmZpZyA9IHtcbiAgICBmb3JtR3JvdXA6IHRoaXMuY29uZmlnLmZvcm1Hcm91cCxcbiAgICBwYXJlbnRJRDogJydcbiAgfTtcbiAgdG91Y2hlZCA9IGZhbHNlO1xuICBlcnJvclN0dWJUZXh0ID0gJyc7XG5cbiAgZHJvcERvd25Db25maWdzOiBJRGF0ZVBpY2tlckRyb3BEb3duQ29uZmlncyA9IHtcbiAgICBkYXk6IHtcbiAgICAgIGlkOiAnJyxcbiAgICAgIGZvcm1Hcm91cDogdGhpcy5jb25maWcuZm9ybUdyb3VwLFxuICAgICAgbGFiZWw6ICcnLFxuICAgICAgb3B0aW9uczogW10sXG4gICAgICBzaXplOiAnbGFyZ2UnLFxuICAgICAgZGlzYWJsZUVycm9yOiB0cnVlXG4gICAgfSxcbiAgICBtb250aDoge1xuICAgICAgaWQ6ICcnLFxuICAgICAgZm9ybUdyb3VwOiB0aGlzLmNvbmZpZy5mb3JtR3JvdXAsXG4gICAgICBsYWJlbDogJycsXG4gICAgICBvcHRpb25zOiBbXSxcbiAgICAgIHNpemU6ICdsYXJnZScsXG4gICAgICBkaXNhYmxlRXJyb3I6IHRydWVcbiAgICB9LFxuICAgIHllYXI6IHtcbiAgICAgIGlkOiAnJyxcbiAgICAgIGZvcm1Hcm91cDogdGhpcy5jb25maWcuZm9ybUdyb3VwLFxuICAgICAgbGFiZWw6ICcnLFxuICAgICAgb3B0aW9uczogW10sXG4gICAgICBzaXplOiAnbGFyZ2UnLFxuICAgICAgZGlzYWJsZUVycm9yOiB0cnVlXG4gICAgfVxuICB9O1xuXG4gIHllYXJTZWxlY3Q6IGFueSA9ICcnO1xuICBtb250aFNlbGVjdDogYW55ID0gJyc7XG4gIGRheVNlbGVjdDogYW55ID0gJyc7XG5cbiAgLy9HZXQgdGhlIGN1cnJlbnQgeWVhciBmb3IgdXNlIGluIHRoZSB5ZWFyIGRyb3Bkb3duXG4gIHByaXZhdGUgY3VycmVudFllYXIgPSBuZXcgRGF0ZSgpLmdldEZ1bGxZZWFyKCk7XG5cbiAgY29uc3RydWN0b3IoXG4gICAgcHJpdmF0ZSB0cmFuc2xhdGU6IFRyYW5zbGF0ZVNlcnZpY2UsXG4gICAgcHVibGljIHN0YW5kQWxvbmVGdW5jdGlvbnM6IFN0YW5kQWxvbmVGdW5jdGlvbnNcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMubGFiZWxDb25maWcgPSB0aGlzLnN0YW5kQWxvbmVGdW5jdGlvbnMubWFrZUxhYmVsQ29uZmlnKFxuICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLFxuICAgICAgdGhpcy5jb25maWcuaWQsXG4gICAgICB0aGlzLmNvbmZpZy5lcnJvck1lc3NhZ2VzLFxuICAgICAgdGhpcy5jb25maWcubGFiZWwsXG4gICAgICB0aGlzLmNvbmZpZy5kZXNjLFxuICAgICAgdGhpcy5jb25maWcuaGludCxcbiAgICAgIHRoaXMuY29uZmlnLnJlcXVpcmVkLFxuICAgICAgdGhpcy5jb25maWcubGFiZWxJY29uQ29uZmlnLFxuICAgICk7XG5cbiAgICAvL3NldCBjb25maWcgZnJvbSBpbmRpdmlkdWFsIG9wdGlvbnMsIGlmIHByZXNlbnRcbiAgICBpZiAodGhpcy5mb3JtR3JvdXAgIT09IHRoaXMuZm9ybUdyb3VwRW1wdHkpIHtcbiAgICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cCA9IHRoaXMuZm9ybUdyb3VwO1xuICAgIH07XG4gICAgaWYgKHRoaXMuaWQpIHRoaXMuY29uZmlnLmlkID0gdGhpcy5pZDtcbiAgICBpZiAodGhpcy5zaXplKSB0aGlzLmNvbmZpZy5zaXplID0gdGhpcy5zaXplO1xuICAgIGlmICh0aGlzLmxhYmVsKSB0aGlzLmNvbmZpZy5sYWJlbCA9IHRoaXMubGFiZWw7XG4gICAgaWYgKHRoaXMucmVxdWlyZWQpIHRoaXMuY29uZmlnLnJlcXVpcmVkID0gdGhpcy5yZXF1aXJlZDtcbiAgICBpZiAodGhpcy5oaW50KSB0aGlzLmNvbmZpZy5oaW50ID0gdGhpcy5oaW50O1xuICAgIGlmICh0aGlzLmRlc2MpIHRoaXMuY29uZmlnLmRlc2MgPSB0aGlzLmRlc2M7XG4gICAgaWYgKHRoaXMuZXJyb3JNZXNzYWdlcykgdGhpcy5jb25maWcuZXJyb3JNZXNzYWdlcyA9IHRoaXMuZXJyb3JNZXNzYWdlcztcbiAgICBpZiAodGhpcy5tYXhZZWFyKSB0aGlzLmNvbmZpZy5tYXhZZWFyID0gdGhpcy5tYXhZZWFyO1xuICAgIGlmICh0aGlzLm1pblllYXIpIHRoaXMuY29uZmlnLm1pblllYXIgPSB0aGlzLm1pblllYXI7XG4gICAgaWYgKHRoaXMudW5rbm93bkRhdGVUb2dnbGUpXG4gICAgICB0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZSA9IHRoaXMudW5rbm93bkRhdGVUb2dnbGU7XG4gICAgaWYgKHRoaXMueWVhclNlbGVjdFNob3cpIHRoaXMuY29uZmlnLnllYXJTZWxlY3RTaG93ID0gdGhpcy55ZWFyU2VsZWN0U2hvdztcbiAgICBpZiAodGhpcy5tb250aFNlbGVjdFNob3cpIHRoaXMuY29uZmlnLm1vbnRoU2VsZWN0U2hvdyA9IHRoaXMubW9udGhTZWxlY3RTaG93O1xuICAgIGlmICh0aGlzLmRheVNlbGVjdFNob3cpIHRoaXMuY29uZmlnLmRheVNlbGVjdFNob3cgPSB0aGlzLmRheVNlbGVjdFNob3c7XG4gICAgLy9TZXQgdGhlIGlkcyBmb3IgdGhlIGRyb3Bkb3duc1xuICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5pZCA9XG4gICAgICB0aGlzLmNvbmZpZy5pZCArIERBVEVfUElDS0VSX0RBWV9DT05UUk9MX0lEX0VYVEVOU0lPTjtcbiAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5pZCA9XG4gICAgICB0aGlzLmNvbmZpZy5pZCArIERBVEVfUElDS0VSX01PTlRIX0NPTlRST0xfSURfRVhURU5TSU9OO1xuICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIuaWQgPVxuICAgICAgdGhpcy5jb25maWcuaWQgKyBEQVRFX1BJQ0tFUl9ZRUFSX0NPTlRST0xfSURfRVhURU5TSU9OO1xuXG4gICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5LmZvcm1Hcm91cCA9IHRoaXMuY29uZmlnLmZvcm1Hcm91cDtcbiAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5mb3JtR3JvdXAgPSB0aGlzLmNvbmZpZy5mb3JtR3JvdXA7XG4gICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5mb3JtR3JvdXAgPSB0aGlzLmNvbmZpZy5mb3JtR3JvdXA7XG5cbiAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkuc2l6ZSA9IHRoaXMuY29uZmlnLnNpemU7XG4gICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGguc2l6ZSA9IHRoaXMuY29uZmlnLnNpemU7XG4gICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5zaXplID0gdGhpcy5jb25maWcuc2l6ZTtcblxuICAgIGlmICh0aGlzLmNvbmZpZy5lcnJvck1lc3NhZ2VzKSB7XG4gICAgICB0aGlzLmVycm9ySWRzID0gdGhpcy5zdGFuZEFsb25lRnVuY3Rpb25zLmdldEVycm9ySWRzKFxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtR3JvdXAsXG4gICAgICAgIHRoaXMuY29uZmlnLmlkICsgREFURV9QSUNLRVJfWUVBUl9DT05UUk9MX0lEX0VYVEVOU0lPTixcbiAgICAgICAgdGhpcy5jb25maWcuZXJyb3JNZXNzYWdlc1xuICAgICAgKTtcbiAgICB9XG5cbiAgICAvLyBQb3B1bGF0ZSB0aGUgbW9udGhzIGFuZCB5ZWFycyBhcnJheXNcbiAgICB0aGlzLnNldE1vbnRoc0xhbmd1YWdlKCk7XG4gICAgdGhpcy5zZXRMYWJlbExhbmd1YWdlKCk7XG4gICAgdGhpcy50cmFuc2xhdGUub25MYW5nQ2hhbmdlLnN1YnNjcmliZSgoKSA9PiB7XG4gICAgICB0aGlzLnNldE1vbnRoc0xhbmd1YWdlKCk7XG4gICAgICB0aGlzLnNldFllYXJEYXlMYW5ndWFnZSgpO1xuICAgICAgdGhpcy5zZXRMYWJlbExhbmd1YWdlKCk7XG4gICAgICB0aGlzLmdldEFyaWFPdmVycmlkZSgpO1xuICAgIH0pO1xuICAgIGlmIChcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4nIHx8XG4gICAgICB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyA9PT0gJ2VuLVVTJ1xuICAgICkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnVua25vd25EYXRlVG9nZ2xlPy55ZWFyVW5rbm93bilcbiAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5vcHRpb25zPy5wdXNoKHtcbiAgICAgICAgICB0ZXh0OiBEQVRFX1BJQ0tFUl9VTktPV05fRU4sXG4gICAgICAgICAgdmFsdWU6ICcqKidcbiAgICAgICAgfSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8ueWVhclVua25vd24pXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIub3B0aW9ucz8ucHVzaCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0ZSLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH1cblxuICAgIGlmICh0aGlzLmNvbmZpZy5taW5ZZWFyIHx8IHRoaXMuY29uZmlnLm1heFllYXIpIHtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy5taW5ZZWFyICYmIHRoaXMuY29uZmlnLm1heFllYXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY29uZmlnLm1pblllYXI7IGkgPD0gdGhpcy5jb25maWcubWF4WWVhcjsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5vcHRpb25zPy5wdXNoKHsgdGV4dDogaS50b1N0cmluZygpIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLm1pblllYXIgJiYgIXRoaXMuY29uZmlnLm1heFllYXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IHRoaXMuY29uZmlnLm1pblllYXI7IGkgPD0gdGhpcy5jdXJyZW50WWVhcjsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5vcHRpb25zPy5wdXNoKHsgdGV4dDogaS50b1N0cmluZygpIH0pO1xuICAgICAgICB9XG4gICAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnLm1heFllYXIgJiYgIXRoaXMuY29uZmlnLm1pblllYXIpIHtcbiAgICAgICAgZm9yIChsZXQgaSA9IDE5MDA7IGkgPD0gdGhpcy5jb25maWcubWF4WWVhcjsgaSsrKSB7XG4gICAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5vcHRpb25zPy5wdXNoKHsgdGV4dDogaS50b1N0cmluZygpIH0pO1xuICAgICAgICB9XG4gICAgICB9XG4gICAgfSBlbHNlIHtcbiAgICAgIGZvciAobGV0IGkgPSAxOTAwOyBpIDw9IHRoaXMuY3VycmVudFllYXI7IGkrKykge1xuICAgICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLm9wdGlvbnM/LnB1c2goeyB0ZXh0OiBpLnRvU3RyaW5nKCkgfSk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgLy8gUG9wdWxhdGUgdGhlIGRheXMgYXJyYXkgYmFzZWQgb24gdGhlIHNlbGVjdGVkIG1vbnRoIGFuZCB5ZWFyXG4gICAgdGhpcy5jb25maWcuZm9ybUdyb3VwXG4gICAgICAuZ2V0KHRoaXMuY29uZmlnLmlkICsgREFURV9QSUNLRVJfTU9OVEhfQ09OVFJPTF9JRF9FWFRFTlNJT04pXG4gICAgICA/LnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoKG1vbnRoKSA9PiB7XG4gICAgICAgIC8vYWRkIGlmIHN0YXRlbWVudCBoZXJlIC0gdGhlIHZhbHVlIG9mIHllYXIgY2FuIGJlIGVtcHR5LCBzaW5jZSBpdCBtYXkgbm90IGhhdmUgYmVlbiBzZWxlY3RlZCB5ZXQuXG4gICAgICAgIGNvbnN0IG51bURheXMgPSB0aGlzLnVwZGF0ZURheXNBcnJheShcbiAgICAgICAgICBtb250aCxcbiAgICAgICAgICB0aGlzLmNvbmZpZy5mb3JtR3JvdXAuZ2V0KHRoaXMuY29uZmlnLmlkICsgJ195ZWFyQ29udHJvbCcpPy52YWx1ZVxuICAgICAgICApO1xuICAgICAgfSk7XG4gICAgdGhpcy5jb25maWcuZm9ybUdyb3VwXG4gICAgICAuZ2V0KHRoaXMuY29uZmlnLmlkICsgREFURV9QSUNLRVJfWUVBUl9DT05UUk9MX0lEX0VYVEVOU0lPTilcbiAgICAgID8udmFsdWVDaGFuZ2VzLnN1YnNjcmliZSgoeWVhcikgPT4ge1xuICAgICAgICBjb25zdCBudW1EYXlzID0gdGhpcy51cGRhdGVEYXlzQXJyYXkoXG4gICAgICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldChcbiAgICAgICAgICAgIHRoaXMuY29uZmlnLmlkICsgREFURV9QSUNLRVJfTU9OVEhfQ09OVFJPTF9JRF9FWFRFTlNJT05cbiAgICAgICAgICApPy52YWx1ZSxcbiAgICAgICAgICB5ZWFyXG4gICAgICAgICk7XG4gICAgICB9KTtcblxuICAgIGlmIChcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4nIHx8XG4gICAgICB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyA9PT0gJ2VuLVVTJ1xuICAgICkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnVua25vd25EYXRlVG9nZ2xlPy5kYXlVbmtub3duKVxuICAgICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkub3B0aW9ucz8ucHVzaCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0VOLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jb25maWcudW5rbm93bkRhdGVUb2dnbGU/LmRheVVua25vd24pXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5wdXNoKHtcbiAgICAgICAgICB0ZXh0OiBEQVRFX1BJQ0tFUl9VTktPV05fRlIsXG4gICAgICAgICAgdmFsdWU6ICcqKidcbiAgICAgICAgfSk7XG4gICAgfVxuXG4gICAgaWYgKFxuICAgICAgKHRoaXMuY29uZmlnLnVua25vd25EYXRlVG9nZ2xlPy5kYXlVbmtub3duICYmXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5sZW5ndGggPT09IDEpIHx8XG4gICAgICAoIXRoaXMuY29uZmlnLnVua25vd25EYXRlVG9nZ2xlPy5kYXlVbmtub3duICYmXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5sZW5ndGggPT09IDApXG4gICAgKSB7XG4gICAgICBmb3IgKGxldCBpID0gMTsgaSA8PSAzMTsgaSsrKSB7XG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5wdXNoKHsgdGV4dDogaS50b1N0cmluZygpIH0pO1xuICAgICAgfVxuICAgIH1cbiAgfVxuXG4gIG5nT25DaGFuZ2VzKCkge1xuICAgIHRoaXMubGFiZWxDb25maWcgPSB0aGlzLnN0YW5kQWxvbmVGdW5jdGlvbnMubWFrZUxhYmVsQ29uZmlnKFxuICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLFxuICAgICAgdGhpcy5jb25maWcuaWQsXG4gICAgICBbXSxcbiAgICAgIHRoaXMuY29uZmlnLmxhYmVsLFxuICAgICAgdGhpcy5jb25maWcuZGVzYyxcbiAgICAgIHRoaXMuY29uZmlnLmhpbnQsXG4gICAgICB0aGlzLmNvbmZpZy5yZXF1aXJlZCxcbiAgICAgIHRoaXMuY29uZmlnLmxhYmVsSWNvbkNvbmZpZyxcbiAgICAgICk7XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkuc2l6ZSA9IHRoaXMuY29uZmlnLnNpemU7XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5zaXplID0gdGhpcy5jb25maWcuc2l6ZTtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIuc2l6ZSA9IHRoaXMuY29uZmlnLnNpemU7XG4gIH1cblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy55ZWFyU2VsZWN0ID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQodGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5pZCk7XG4gICAgdGhpcy5tb250aFNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZHJvcERvd25Db25maWdzLm1vbnRoLmlkKTtcbiAgICB0aGlzLmRheVNlbGVjdCA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKHRoaXMuZHJvcERvd25Db25maWdzLmRheS5pZCk7XG4gICAgdGhpcy5nZXRBcmlhT3ZlcnJpZGUoKTtcbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxhbmd1YWdlIGZvciBkcm9wZG93biBvcHRpb25zXG4gICAqIFRPRE86IFNldCB2YWx1ZSBvZiBlYWNoIG1vbnRoIHRvIGJlIHRoZSBsb3YgYW5kIG5vdCB0aGUgdGV4dFxuICAgKi9cbiAgc2V0TW9udGhzTGFuZ3VhZ2UoKSB7XG4gICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGgub3B0aW9ucyA9IFtdO1xuICAgIGlmIChcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4nIHx8XG4gICAgICB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyA9PT0gJ2VuLVVTJ1xuICAgICkge1xuICAgICAgdGhpcy5tb250aHMgPSBEQVRFX1BJQ0tFUl9NT05USFNfRU47XG4gICAgICBpZiAodGhpcy5jb25maWcudW5rbm93bkRhdGVUb2dnbGU/Lm1vbnRoVW5rbm93bilcbiAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGgub3B0aW9ucz8ucHVzaCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0VOLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vbnRocyA9IERBVEVfUElDS0VSX01PTlRIU19GUjtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8ubW9udGhVbmtub3duKVxuICAgICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5vcHRpb25zPy5wdXNoKHtcbiAgICAgICAgICB0ZXh0OiBEQVRFX1BJQ0tFUl9VTktPV05fRlIsXG4gICAgICAgICAgdmFsdWU6ICcqKidcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMubW9udGhzLmZvckVhY2goKG1vbnRoOiBzdHJpbmcsIGluZGV4OiBudW1iZXIpID0+IHtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLm1vbnRoLm9wdGlvbnM/LnB1c2goe1xuICAgICAgICB0ZXh0OiBtb250aCxcbiAgICAgICAgdmFsdWU6IChpbmRleCArIDEpLnRvU3RyaW5nKCkucGFkU3RhcnQoMiwgJzAnKVxuICAgICAgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogVXNlZCB0byBzZXQgdGhlIGxhbmd1YWdlIG9mIHllYXIvZGF5ICd1bmtub3duJyBmaWVsZCB3aGVuIGxhbmdhdWdlIGNoYW5nZXNcbiAgICovXG4gIHNldFllYXJEYXlMYW5ndWFnZSgpIHtcbiAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkub3B0aW9ucz8uc2hpZnQoKTtcbiAgICB0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLm9wdGlvbnM/LnNoaWZ0KCk7XG4gICAgaWYgKFxuICAgICAgdGhpcy50cmFuc2xhdGUuY3VycmVudExhbmcgPT09ICdlbicgfHxcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4tVVMnXG4gICAgKSB7XG4gICAgICB0aGlzLm1vbnRocyA9IERBVEVfUElDS0VSX01PTlRIU19FTjtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8uZGF5VW5rbm93bilcbiAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5Lm9wdGlvbnM/LnVuc2hpZnQoe1xuICAgICAgICAgIHRleHQ6IERBVEVfUElDS0VSX1VOS09XTl9FTixcbiAgICAgICAgICB2YWx1ZTogJyoqJ1xuICAgICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8ueWVhclVua25vd24pXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIub3B0aW9ucz8udW5zaGlmdCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0VOLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLm1vbnRocyA9IERBVEVfUElDS0VSX01PTlRIU19GUjtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8uZGF5VW5rbm93bilcbiAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5Lm9wdGlvbnM/LnVuc2hpZnQoe1xuICAgICAgICAgIHRleHQ6IERBVEVfUElDS0VSX1VOS09XTl9GUixcbiAgICAgICAgICB2YWx1ZTogJyoqJ1xuICAgICAgICB9KTtcbiAgICAgIGlmICh0aGlzLmNvbmZpZy51bmtub3duRGF0ZVRvZ2dsZT8ueWVhclVua25vd24pXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIub3B0aW9ucz8udW5zaGlmdCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0ZSLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiBTZXQgdGhlIGxhbmd1YWdlIGZvciB0aGUgbGFiZWxzIG9mIGVhY2ggZHJvcGRvd25cbiAgICovXG4gIHNldExhYmVsTGFuZ3VhZ2UoKSB7XG4gICAgaWYgKFxuICAgICAgdGhpcy50cmFuc2xhdGUuY3VycmVudExhbmcgPT09ICdlbicgfHxcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4tVVMnXG4gICAgKSB7XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkubGFiZWwgPSBEQVRFX1BJQ0tFUl9MQUJFTFNfRU5bMF07XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5sYWJlbCA9IERBVEVfUElDS0VSX0xBQkVMU19FTlsxXTtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIubGFiZWwgPSBEQVRFX1BJQ0tFUl9MQUJFTFNfRU5bMl07XG5cbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5wbGFjZWhvbGRlciA9IERBVEVfUElDS0VSX1BMQUNFSE9MREVSX0RBWV9FTjtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLm1vbnRoLnBsYWNlaG9sZGVyID0gREFURV9QSUNLRVJfUExBQ0VIT0xERVJfTU9OVEhfRU47XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLnBsYWNlaG9sZGVyID0gREFURV9QSUNLRVJfUExBQ0VIT0xERVJfWUVBUl9FTjtcblxuICAgICAgdGhpcy5lcnJvclN0dWJUZXh0ID0gRVJST1JfVEVYVF9TVFVCLmVuO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkubGFiZWwgPSBEQVRFX1BJQ0tFUl9MQUJFTFNfRlJbMF07XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5sYWJlbCA9IERBVEVfUElDS0VSX0xBQkVMU19GUlsxXTtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIubGFiZWwgPSBEQVRFX1BJQ0tFUl9MQUJFTFNfRlJbMl07XG5cbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5wbGFjZWhvbGRlciA9IERBVEVfUElDS0VSX1BMQUNFSE9MREVSX0RBWV9GUjtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLm1vbnRoLnBsYWNlaG9sZGVyID0gREFURV9QSUNLRVJfUExBQ0VIT0xERVJfTU9OVEhfRlI7XG4gICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLnBsYWNlaG9sZGVyID0gREFURV9QSUNLRVJfUExBQ0VIT0xERVJfWUVBUl9GUjtcblxuICAgICAgdGhpcy5lcnJvclN0dWJUZXh0ID0gRVJST1JfVEVYVF9TVFVCLmZyO1xuICAgIH1cbiAgfVxuXG4gIC8qKlxuICAgKiB1cGRhdGUgdGhlIGRheXMgYXJyYXkgd2l0aCB0aGUgY29ycmVjdCBudW1iZXIgb2YgZGF5cyBiYXNlZCBvbiB0aGUgeWVhciBhbmQgdGhlIG1vbnRoXG4gICAqIEBwYXJhbSBtb250aCBzdHJpbmcgb2YgdGhlIG1vbnRoIChUT0RPOiBDaGFuZ2UgdGhpcyB0byBiZSBhbiBMT1YpXG4gICAqIEBwYXJhbSB5ZWFyIHllYXIgc2VsZWN0ZWRcbiAgICovXG4gIHByaXZhdGUgdXBkYXRlRGF5c0FycmF5KG1vbnRoOiBzdHJpbmcsIHllYXI6IG51bWJlcik6IHZvaWQge1xuICAgIHRoaXMuZGF5cyA9IFtdO1xuICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zID0gW107XG4gICAgY29uc3QgbnVtRGF5cyA9IHRoaXMuZ2V0TnVtRGF5c0luTW9udGgobW9udGgsIHllYXIpO1xuICAgIGZvciAobGV0IGkgPSAxOyBpIDw9IG51bURheXM7IGkrKykge1xuICAgICAgdGhpcy5kYXlzLnB1c2goaSk7XG4gICAgfVxuICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cFxuICAgICAgLmdldCh0aGlzLmNvbmZpZy5pZCArIERBVEVfUElDS0VSX0RBWV9DT05UUk9MX0lEX0VYVEVOU0lPTilcbiAgICAgID8uc2V0VmFsdWUoJycpO1xuICAgIGlmIChcbiAgICAgIHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nID09PSAnZW4nIHx8XG4gICAgICB0aGlzLnRyYW5zbGF0ZS5jdXJyZW50TGFuZyA9PT0gJ2VuLVVTJ1xuICAgICkge1xuICAgICAgaWYgKHRoaXMuY29uZmlnLnVua25vd25EYXRlVG9nZ2xlPy5kYXlVbmtub3duKVxuICAgICAgICB0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkub3B0aW9ucz8ucHVzaCh7XG4gICAgICAgICAgdGV4dDogREFURV9QSUNLRVJfVU5LT1dOX0VOLFxuICAgICAgICAgIHZhbHVlOiAnKionXG4gICAgICAgIH0pO1xuICAgIH0gZWxzZSB7XG4gICAgICBpZiAodGhpcy5jb25maWcudW5rbm93bkRhdGVUb2dnbGU/LmRheVVua25vd24pXG4gICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5wdXNoKHtcbiAgICAgICAgICB0ZXh0OiBEQVRFX1BJQ0tFUl9VTktPV05fRlIsXG4gICAgICAgICAgdmFsdWU6ICcqKidcbiAgICAgICAgfSk7XG4gICAgfVxuICAgIHRoaXMuZGF5cy5mb3JFYWNoKChkYXkpID0+IHtcbiAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLmRheS5vcHRpb25zPy5wdXNoKHsgdGV4dDogZGF5LnRvU3RyaW5nKCkgfSk7XG4gICAgfSk7XG4gIH1cblxuICAvKipcbiAgICogR2V0IHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGggYmFzZWQgb24gdGhlIG1vbnRoIGFuZCB5ZWFyXG4gICAqIEBwYXJhbSBtb250aCBzdHJpbmcgb2YgdGhlIG1vbnRoIHNlbGVjdGVkXG4gICAqIEBwYXJhbSB5ZWFyIG51bWJlciBzZWxlY3RlZFxuICAgKiBAcmV0dXJucyBudW1iZXIgcmVwcmVzZW50aW5nIHRoZSBudW1iZXIgb2YgZGF5cyBpbiB0aGUgbW9udGhcbiAgICovXG4gIHByaXZhdGUgZ2V0TnVtRGF5c0luTW9udGgobW9udGg6IHN0cmluZywgeWVhcjogbnVtYmVyKTogbnVtYmVyIHtcbiAgICBjb25zdCBtb250aE51bTogbnVtYmVyID0gK21vbnRoO1xuICAgIGlmIChtb250aE51bSA9PT0gMikge1xuICAgICAgaWYgKFN0cmluZyh5ZWFyKSA9PT0gJyoqJykge1xuICAgICAgICAvL2lmIHllYXIgaXMgdW5rbm93biBhbmQgbW9udGggaXMgZmViIHJldHVybiAyOVxuICAgICAgICByZXR1cm4gMjk7XG4gICAgICB9XG4gICAgICByZXR1cm4gdGhpcy5pc0xlYXBZZWFyKHllYXIpID8gMjkgOiAyODtcbiAgICB9IGVsc2UgaWYgKFs0LCA2LCA5LCAxMV0uaW5jbHVkZXMobW9udGhOdW0pKSB7XG4gICAgICByZXR1cm4gMzA7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAzMTtcbiAgICB9XG4gIH1cblxuICAvKipcbiAgICogQ2hlY2sgaWYgdGhlIHllYXIgaXMgYSBsZWFwIHllYXJcbiAgICogQHBhcmFtIHllYXIgbnVtYmVyIHJlcHJlc2VudGluZyB0aGUgeWVhclxuICAgKiBAcmV0dXJucyB0cnVlIGlmIGEgbGVhcCB5ZWFyLCBmYWxzZSBvdGhlcndpc2VcbiAgICovXG4gIHByaXZhdGUgaXNMZWFwWWVhcih5ZWFyOiBudW1iZXIpOiBib29sZWFuIHtcbiAgICBpZiAoeWVhciAlIDQgPT09IDApIHtcbiAgICAgIGlmICh5ZWFyICUgMTAwID09PSAwKSB7XG4gICAgICAgIHJldHVybiB5ZWFyICUgNDAwID09PSAwO1xuICAgICAgfVxuICAgICAgcmV0dXJuIHRydWU7XG4gICAgfVxuICAgIHJldHVybiBmYWxzZTtcbiAgfVxuXG4gIGdldERhdGVQaWNrZXJUb3VjaGVkT3JJbnZhbGlkKCk6IGJvb2xlYW4ge1xuICAgIGxldCBkYXRlUGlja2VyU3RhdGU6IGJvb2xlYW4gfCB1bmRlZmluZWQgPSBmYWxzZTtcblxuICAgIGRhdGVQaWNrZXJTdGF0ZSA9XG4gICAgICAodGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLmlkKT8udG91Y2hlZCAmJlxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtR3JvdXAuZ2V0KHRoaXMuZHJvcERvd25Db25maWdzLnllYXIuaWQpPy5pbnZhbGlkKSB8fFxuICAgICAgKHRoaXMuY29uZmlnLmZvcm1Hcm91cC5nZXQodGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGguaWQpPy50b3VjaGVkICYmXG4gICAgICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cC5nZXQodGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGguaWQpPy5pbnZhbGlkKSB8fFxuICAgICAgKHRoaXMuY29uZmlnLmZvcm1Hcm91cC5nZXQodGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5LmlkKT8udG91Y2hlZCAmJlxuICAgICAgICB0aGlzLmNvbmZpZy5mb3JtR3JvdXAuZ2V0KHRoaXMuZHJvcERvd25Db25maWdzLmRheS5pZCk/LmludmFsaWQpO1xuXG4gICAgdGhpcy50b3VjaGVkID0gZGF0ZVBpY2tlclN0YXRlIHx8IGZhbHNlO1xuICAgIHRoaXMuZ2V0QXJpYU92ZXJyaWRlKGRhdGVQaWNrZXJTdGF0ZSk7XG4gICAgcmV0dXJuIGRhdGVQaWNrZXJTdGF0ZSA/PyBmYWxzZTtcbiAgICAvLyAgcmV0dXJuIHRoaXMuY29uZmlnLmZvcm1Hcm91cD8udG91Y2hlZCAmJiB0aGlzLmNvbmZpZy5mb3JtR3JvdXA/LmludmFsaWQ7XG4gIH1cblxuICAvKipcbiAgICogT3ZlcnJpZGUgdGhlIGFyaWEgbGFiZWxzIGZvciBlYWNoIG9mIHRoZSBzZWxlY3QgZmllbGRzIGluIHRoZSBkYXRlIHBpY2tlclxuICAgKiBAcGFyYW0gaGFzRXJyb3IgaXMgdGhlIGZpZWxkIGluIGVycm9yP1xuICAgKi9cbiAgZ2V0QXJpYU92ZXJyaWRlKGhhc0Vycm9yPzogYm9vbGVhbikge1xuICAgIGlmICh0aGlzLnllYXJTZWxlY3QgIT09ICcnKSB7XG4gICAgICBpZiAoXG4gICAgICAgIGhhc0Vycm9yICYmXG4gICAgICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cC5nZXQodGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5pZCk/LnRvdWNoZWQgJiZcbiAgICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmRyb3BEb3duQ29uZmlncy55ZWFyLmlkKT8uaW52YWxpZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMueWVhclNlbGVjdD8uc2V0QXR0cmlidXRlKFxuICAgICAgICAgICdhcmlhLWxhYmVsJyxcbiAgICAgICAgICB0aGlzLmdldExhYmVsQ29yZSgpICtcbiAgICAgICAgICAgIHRoaXMuZHJvcERvd25Db25maWdzLnllYXIubGFiZWwgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIHRoaXMuZ2V0RXJyb3JBcmlhKClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMueWVhclNlbGVjdD8uc2V0QXR0cmlidXRlKFxuICAgICAgICAgICdhcmlhLWxhYmVsJyxcbiAgICAgICAgICB0aGlzLmdldExhYmVsQ29yZSgpICsgdGhpcy5kcm9wRG93bkNvbmZpZ3MueWVhci5sYWJlbFxuICAgICAgICApO1xuICAgICAgfVxuICAgIH1cbiAgICBpZiAodGhpcy5tb250aFNlbGVjdCAhPT0gJycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaGFzRXJyb3IgJiZcbiAgICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5pZCk/LnRvdWNoZWQgJiZcbiAgICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmRyb3BEb3duQ29uZmlncy5tb250aC5pZCk/LmludmFsaWRcbiAgICAgICkge1xuICAgICAgICB0aGlzLm1vbnRoU2VsZWN0Py5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnLFxuICAgICAgICAgIHRoaXMuZ2V0TGFiZWxDb3JlKCkgK1xuICAgICAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MubW9udGgubGFiZWwgK1xuICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgIHRoaXMuZ2V0RXJyb3JBcmlhKClcbiAgICAgICAgKTtcbiAgICAgIH0gZWxzZSB7XG4gICAgICAgIHRoaXMubW9udGhTZWxlY3Q/LnNldEF0dHJpYnV0ZShcbiAgICAgICAgICAnYXJpYS1sYWJlbCcsXG4gICAgICAgICAgdGhpcy5nZXRMYWJlbENvcmUoKSArIHRoaXMuZHJvcERvd25Db25maWdzLm1vbnRoLmxhYmVsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICAgIGlmICh0aGlzLmRheVNlbGVjdCAhPT0gJycpIHtcbiAgICAgIGlmIChcbiAgICAgICAgaGFzRXJyb3IgJiZcbiAgICAgICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmRyb3BEb3duQ29uZmlncy5kYXkuaWQpPy50b3VjaGVkICYmXG4gICAgICAgIHRoaXMuY29uZmlnLmZvcm1Hcm91cC5nZXQodGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5LmlkKT8uaW52YWxpZFxuICAgICAgKSB7XG4gICAgICAgIHRoaXMuZGF5U2VsZWN0Py5zZXRBdHRyaWJ1dGUoXG4gICAgICAgICAgJ2FyaWEtbGFiZWwnLFxuICAgICAgICAgIHRoaXMuZ2V0TGFiZWxDb3JlKCkgK1xuICAgICAgICAgICAgdGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5LmxhYmVsICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICB0aGlzLmdldEVycm9yQXJpYSgpXG4gICAgICAgICk7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICB0aGlzLmRheVNlbGVjdD8uc2V0QXR0cmlidXRlKFxuICAgICAgICAgICdhcmlhLWxhYmVsJyxcbiAgICAgICAgICB0aGlzLmdldExhYmVsQ29yZSgpICsgdGhpcy5kcm9wRG93bkNvbmZpZ3MuZGF5LmxhYmVsXG4gICAgICAgICk7XG4gICAgICB9XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyBhIGNvcmUgc3RyaW5nIG9mIHRoZSBsYWJlbCAoZGF0ZSBwaWNrZXIgbGFiZWwsIGRlc2NyaXB0aW9uLCBhbmQgaGludCkgZm9yIGFyaWEgdGV4dFxuICAgKiBAcmV0dXJucyBsYWJlbCBjb3JlIHRleHQgdHJhbnNsYXRlZCBzdHJpbmdcbiAgICovXG4gIGdldExhYmVsQ29yZSgpIHtcbiAgICBsZXQgbGFiZWxDb3JlID0gJyc7XG4gICAgaWYgKHRoaXMuY29uZmlnLmxhYmVsKVxuICAgICAgbGFiZWxDb3JlICs9IHRoaXMudHJhbnNsYXRlLmluc3RhbnQodGhpcy5jb25maWcubGFiZWwpICsgJyAnO1xuICAgIGlmICh0aGlzLmNvbmZpZy5kZXNjKVxuICAgICAgbGFiZWxDb3JlICs9IHRoaXMudHJhbnNsYXRlLmluc3RhbnQodGhpcy5jb25maWcuZGVzYykgKyAnICc7XG4gICAgaWYgKHRoaXMuY29uZmlnLmhpbnQpXG4gICAgICBsYWJlbENvcmUgKz0gdGhpcy50cmFuc2xhdGUuaW5zdGFudCh0aGlzLmNvbmZpZy5oaW50KSArICcgJztcbiAgICByZXR1cm4gbGFiZWxDb3JlO1xuICB9XG5cbiAgLyoqXG4gICAqIEdlbmVyYXRlcyB0aGUgdHJhbnNsYXRlZCBlcnJvciBzdHJpbmcgZm9yIGFyaWEgdGV4dFxuICAgKiBAcmV0dXJucyBlcnJvcnMgdGV4dCB0cmFuc2xhdGVkIHN0cmluZ1xuICAgKi9cbiAgZ2V0RXJyb3JBcmlhKCkge1xuICAgIGxldCBlcnJvcnMgPSAnJztcbiAgICB0aGlzLmVycm9ySWRzLmZvckVhY2goKGVycm9yKSA9PiB7XG4gICAgICBlcnJvcnMgKz0gdGhpcy50cmFuc2xhdGUuaW5zdGFudChlcnJvci5lcnJvckxPVikgKyAnICc7XG4gICAgfSk7XG4gICAgcmV0dXJuIGVycm9ycztcbiAgfVxuXG4gIG9uVG91Y2ggPSAoKSA9PiB7XG4gICAgaWYgKHRoaXMuZm9ybUdyb3VwPy5nZXQodGhpcy5jb25maWcuaWQpPy50b3VjaGVkID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5mb3JtR3JvdXA/LmdldCh0aGlzLmNvbmZpZy5pZCk/Lm1hcmtBc1RvdWNoZWQoKTtcbiAgICB9XG4gIH07XG4gIFxuICBvbkNoYW5nZSA9ICh2YWx1ZTogc3RyaW5nKSA9PiB7XG4gICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLmdldCh0aGlzLmNvbmZpZy5pZCk/LnNldFZhbHVlKHZhbHVlKTtcbiAgfTtcblxuICBjaGFuZ2VWYWx1ZShldmVudDogYW55KXtcbiAgICB0aGlzLndyaXRlVmFsdWUoZXZlbnQuc3JjRWxlbWVudC52YWx1ZSk7XG4gICAgdGhpcy5vblRvdWNoKCk7XG4gIH1cblxuICB3cml0ZVZhbHVlKHZhbHVlOiBzdHJpbmcpOiB2b2lkIHtcbiAgICB0aGlzLm9uQ2hhbmdlKHZhbHVlKTtcbiAgfVxuICBcbiAgcmVnaXN0ZXJPbkNoYW5nZShmbjogYW55KTogdm9pZCB7XG4gICAgdGhpcy5jb25maWcuZm9ybUdyb3VwLnZhbHVlQ2hhbmdlcy5zdWJzY3JpYmUoZm4pO1xuICB9XG4gIHJlZ2lzdGVyT25Ub3VjaGVkKGZuOiBhbnkpOiB2b2lkIHtcbiAgICB0aGlzLm9uVG91Y2ggPSBmbjtcbiAgfVxuXG4gIC8qKlxuICAgKiBBcHBseSBhIGRpc2FibGVkIHN0YXRlXG4gICAqL1xuICAgc2V0RGlzYWJsZWRTdGF0ZShpc0Rpc2FibGVkOiBib29sZWFuKSB7XG4gICAgaWYoaXNEaXNhYmxlZCkge1xuICAgICAgdGhpcy5mb3JtR3JvdXA/LmdldCh0aGlzLmNvbmZpZy5pZCk/LmRpc2FibGUoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5mb3JtR3JvdXA/LmdldCh0aGlzLmNvbmZpZy5pZCk/LmVuYWJsZSgpO1xuICAgIH1cbiAgfVxufVxuIiwiPGRpdiBjbGFzcz1cInt7IGNvbmZpZy5zaXplIH19XCI+XG4gIDxpcmNjLWNsLWxpYi1sYWJlbFxuICAgIFtjb25maWddPVwibGFiZWxDb25maWdcIlxuICAgIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICA+PC9pcmNjLWNsLWxpYi1sYWJlbD5cbiAgPGZpZWxkc2V0IGNsYXNzPVwiYWxsLXNlbGVjdC1jb250YWluZXJcIj5cbiAgICA8aXJjYy1jbC1saWItc2VsZWN0XG4gICAgICBjbGFzcz1cInNlbGVjdC15ZWFyXCJcbiAgICAgIFthdHRyLmFyaWEtbGl2ZV09XCInb2ZmJ1wiXG4gICAgICBbY29uZmlnXT1cImRyb3BEb3duQ29uZmlncy55ZWFyXCJcbiAgICAgICpuZ0lmPVwiY29uZmlnLnllYXJTZWxlY3RTaG93XCJcbiAgICAgIChjaGFuZ2UpPVwiY2hhbmdlVmFsdWUoJGV2ZW50KVwiXG4gICAgPjwvaXJjYy1jbC1saWItc2VsZWN0PlxuICAgIDxpcmNjLWNsLWxpYi1zZWxlY3RcbiAgICAgIGNsYXNzPVwic2VsZWN0LW1vbnRoXCJcbiAgICAgIFtjb25maWddPVwiZHJvcERvd25Db25maWdzLm1vbnRoXCJcbiAgICAgICpuZ0lmPVwiY29uZmlnLm1vbnRoU2VsZWN0U2hvd1wiXG4gICAgICAoY2hhbmdlKT1cImNoYW5nZVZhbHVlKCRldmVudClcIlxuICAgID48L2lyY2MtY2wtbGliLXNlbGVjdD5cbiAgICA8aXJjYy1jbC1saWItc2VsZWN0XG4gICAgICBjbGFzcz1cInNlbGVjdC1kYXlcIlxuICAgICAgW2NvbmZpZ109XCJkcm9wRG93bkNvbmZpZ3MuZGF5XCJcbiAgICAgICpuZ0lmPVwiY29uZmlnLmRheVNlbGVjdFNob3dcIlxuICAgICAgKGNoYW5nZSk9XCJjaGFuZ2VWYWx1ZSgkZXZlbnQpXCJcbiAgICA+PC9pcmNjLWNsLWxpYi1zZWxlY3Q+XG4gIDwvZmllbGRzZXQ+XG4gIDxkaXYgYXJpYS1saXZlPVwicG9saXRlXCI+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImdldERhdGVQaWNrZXJUb3VjaGVkT3JJbnZhbGlkKClcIj5cbiAgICAgIDxzcGFuIGNsYXNzPVwic3Itb25seVwiPnt7XG4gICAgICAgIGVycm9yU3R1YlRleHQgKyAnOiAnICsgKGNvbmZpZy5sYWJlbCB8fCAnJyB8IHRyYW5zbGF0ZSkgKyAnOiAnXG4gICAgICB9fTwvc3Bhbj5cbiAgICAgIDwhLS0gVE9ETzogRG8gc29tZXRoaW5nIGNsZXZlciBoZXJlIHRvIGFkZCB3aGljaCBvZiB0aGUgZHJvcGRvd25zIGFyZSBpbiBlcnJvciBhbmQgcHV0IHRoZW0gaW4gdGhlIGFib3ZlIHAgdGFnIC0tPlxuICAgICAgPG5nLWNvbnRhaW5lciAqbmdGb3I9XCJsZXQgZXJyb3JzIG9mIGVycm9ySWRzOyBsZXQgaSA9IGluZGV4XCI+XG4gICAgICAgIDxkaXZcbiAgICAgICAgICAqbmdJZj1cImNvbmZpZy5mb3JtR3JvdXAuZ2V0KGRyb3BEb3duQ29uZmlncy55ZWFyLmlkKT8uZXJyb3JzPy5bZXJyb3JzLmtleV0gfHwgY29uZmlnLmZvcm1Hcm91cC5nZXQoZHJvcERvd25Db25maWdzLm1vbnRoLmlkKT8uZXJyb3JzPy5bZXJyb3JzLmtleV0gfHwgY29uZmlnLmZvcm1Hcm91cC5nZXQoZHJvcERvd25Db25maWdzLmRheS5pZCk/LmVycm9ycz8uW2Vycm9ycy5rZXldXCJcbiAgICAgICAgICBjbGFzcz1cInJhZGlvLWVycm9yc1wiXG4gICAgICAgID5cbiAgICAgICAgICA8aXJjYy1jbC1saWItZXJyb3JcbiAgICAgICAgICAgIFtpZF09XCJlcnJvcnMuaWRcIlxuICAgICAgICAgICAgW2Vycm9yTE9WXT1cImVycm9ycy5lcnJvckxPVlwiXG4gICAgICAgICAgICBbc2l6ZV09XCJjb25maWcuc2l6ZVwiXG4gICAgICAgICAgPjwvaXJjYy1jbC1saWItZXJyb3I+XG4gICAgICAgIDwvZGl2PlxuICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgPC9uZy1jb250YWluZXI+XG4gIDwvZGl2PlxuPC9kaXY+XG4iXX0=