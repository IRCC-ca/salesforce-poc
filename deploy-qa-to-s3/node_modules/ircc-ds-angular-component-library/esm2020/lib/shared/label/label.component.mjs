import { Component, Input } from '@angular/core';
import { FormGroup } from '@angular/forms';
import * as i0 from "@angular/core";
import * as i1 from "@ngx-translate/core";
import * as i2 from "../../../shared/functions/stand-alone.functions";
import * as i3 from "./label-button.service";
import * as i4 from "@angular/common";
export const ERROR_TEXT_STUB = {
    en: 'Error',
    fr: 'Erreur'
};
export const HELP_ICON_ALT = {
    en: ', more information',
    fr: ", plus d'information"
};
export class LabelComponent {
    constructor(translate, standAloneFunctions, labelButton) {
        this.translate = translate;
        this.standAloneFunctions = standAloneFunctions;
        this.labelButton = labelButton;
        this.config = {
            formGroup: new FormGroup({}),
            parentID: '',
            legend: false
        };
        this.labelIconText = '';
    }
    ngOnInit() {
        //set config from individual options, if present
        if (this.formGroup)
            this.config.formGroup = this.formGroup;
        if (this.errorMessages)
            this.config.errorMessages = this.errorMessages;
        if (this.parentID)
            this.config.parentID = this.parentID;
        if (this.label)
            this.config.label = this.label;
        if (this.desc)
            this.config.desc = this.desc;
        if (this.hint)
            this.config.hint = this.hint;
        if (this.required)
            this.config.required = this.required;
        if (this.iconButton)
            this.config.iconButton = this.iconButton;
        if (this.topLabel)
            this.config.topLabel = this.topLabel;
        if (this.touched)
            this.config.touched = this.touched;
        if (this.legend)
            this.config.legend = this.legend;
        this.setLang(this.translate.currentLang);
        this.translate.onLangChange.subscribe((change) => {
            this.setLang(change.lang);
        });
    }
    setLang(lang) {
        if (lang === 'en' || lang === 'en-US') {
            // this.errorStubText = ERROR_TEXT_STUB_EN;
            this.labelIconText = HELP_ICON_ALT.en;
        }
        else {
            // this.errorStubText = ERROR_TEXT_STUB_FR;
            this.labelIconText = HELP_ICON_ALT.fr;
        }
    }
    /**
     * Output the button press
     * @param id of the button being pressed (same as component ID)
     */
    iconButtonClick() {
        this.labelButton.buttonPress(this.config.parentID);
    }
    returnLabel() {
        return !this.config.topLabel ? this.config.label : this.config.topLabel;
    }
}
LabelComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: LabelComponent, deps: [{ token: i1.TranslateService }, { token: i2.StandAloneFunctions }, { token: i3.LabelButtonService }], target: i0.ɵɵFactoryTarget.Component });
LabelComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.12", type: LabelComponent, selector: "ircc-cl-lib-label", inputs: { config: "config", formGroup: "formGroup", errorMessages: "errorMessages", parentID: "parentID", label: "label", desc: "desc", hint: "hint", required: "required", iconButton: "iconButton", topLabel: "topLabel", touched: "touched", legend: "legend" }, ngImport: i0, template: "<div\n  id=\"{{ config.parentID + '_label' }}\"\n  class=\"label_container\"\n  [ngClass]=\"{ extra_padding: config.label && !config.desc && !config.hint }\"\n>\n  <ng-container *ngIf=\"config.legend === true; else noLegend\">\n    <ng-container *ngIf=\"config.label\">\n      <div\n        *ngIf=\"config.label\"\n        class=\"label\"\n        [attr.for]=\"config.parentID\"\n      >\n        <div class=\"label_field_container\">\n          <div\n            class=\"required-field-container\"\n            *ngIf=\"config.required\"\n          >\n            <i class=\"fa-regular fa-asterisk required-star\"></i>\n            {{ config.label || '' | translate }}\n          </div>\n          <div *ngIf=\"!config.required\">\n            {{ config.label || '' | translate }}\n          </div>\n          <div\n            *ngIf=\"config.iconButton\"\n            class=\"icon_container\"\n          >\n            <button\n              class=\"touch_button\"\n              category=\"plain\"\n              (click)=\"iconButtonClick()\"\n              role=\"button\"\n              [attr.aria-label]=\"\n                (config.label | translate) +\n                ' ' +\n                (config.iconButton.ariaText | translate)\n              \"\n            ></button>\n            <i [class]=\"config.iconButton.iconClass\"></i>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n  <p\n    *ngIf=\"config.desc\"\n    class=\"input-desc\"\n  >\n    {{ config.desc || '' | translate }}\n  </p>\n  <p\n    *ngIf=\"config.hint\"\n    class=\"input-hint\"\n  >\n    {{ config.hint | translate }}\n  </p>\n</div>\n\n<ng-template #noLegend>\n  <label\n    *ngIf=\"config.label\"\n    class=\"label\"\n    [attr.for]=\"config.parentID\"\n  >\n    <span class=\"label_field_container\">\n      <div\n        class=\"required-field-container\"\n        *ngIf=\"config.required\"\n      >\n        <i class=\"fa-regular fa-asterisk required-star\"></i\n        >{{ config.label || '' | translate }}\n      </div>\n      <div *ngIf=\"!config.required\">\n        {{ config.label || '' | translate }}\n      </div>\n      <div\n        *ngIf=\"config.iconButton\"\n        class=\"icon_container\"\n      >\n        <button\n          class=\"touch_button\"\n          category=\"plain\"\n          (click)=\"iconButtonClick()\"\n          role=\"button\"\n          [attr.aria-label]=\"\n            (config.label | translate) +\n            ' ' +\n            (config.iconButton.ariaText | translate)\n          \"\n        ></button>\n        <i [class]=\"config.iconButton.iconClass\"></i>\n      </div>\n    </span>\n  </label>\n</ng-template>\n", dependencies: [{ kind: "directive", type: i4.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i4.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "pipe", type: i1.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: LabelComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ircc-cl-lib-label', template: "<div\n  id=\"{{ config.parentID + '_label' }}\"\n  class=\"label_container\"\n  [ngClass]=\"{ extra_padding: config.label && !config.desc && !config.hint }\"\n>\n  <ng-container *ngIf=\"config.legend === true; else noLegend\">\n    <ng-container *ngIf=\"config.label\">\n      <div\n        *ngIf=\"config.label\"\n        class=\"label\"\n        [attr.for]=\"config.parentID\"\n      >\n        <div class=\"label_field_container\">\n          <div\n            class=\"required-field-container\"\n            *ngIf=\"config.required\"\n          >\n            <i class=\"fa-regular fa-asterisk required-star\"></i>\n            {{ config.label || '' | translate }}\n          </div>\n          <div *ngIf=\"!config.required\">\n            {{ config.label || '' | translate }}\n          </div>\n          <div\n            *ngIf=\"config.iconButton\"\n            class=\"icon_container\"\n          >\n            <button\n              class=\"touch_button\"\n              category=\"plain\"\n              (click)=\"iconButtonClick()\"\n              role=\"button\"\n              [attr.aria-label]=\"\n                (config.label | translate) +\n                ' ' +\n                (config.iconButton.ariaText | translate)\n              \"\n            ></button>\n            <i [class]=\"config.iconButton.iconClass\"></i>\n          </div>\n        </div>\n      </div>\n    </ng-container>\n  </ng-container>\n  <p\n    *ngIf=\"config.desc\"\n    class=\"input-desc\"\n  >\n    {{ config.desc || '' | translate }}\n  </p>\n  <p\n    *ngIf=\"config.hint\"\n    class=\"input-hint\"\n  >\n    {{ config.hint | translate }}\n  </p>\n</div>\n\n<ng-template #noLegend>\n  <label\n    *ngIf=\"config.label\"\n    class=\"label\"\n    [attr.for]=\"config.parentID\"\n  >\n    <span class=\"label_field_container\">\n      <div\n        class=\"required-field-container\"\n        *ngIf=\"config.required\"\n      >\n        <i class=\"fa-regular fa-asterisk required-star\"></i\n        >{{ config.label || '' | translate }}\n      </div>\n      <div *ngIf=\"!config.required\">\n        {{ config.label || '' | translate }}\n      </div>\n      <div\n        *ngIf=\"config.iconButton\"\n        class=\"icon_container\"\n      >\n        <button\n          class=\"touch_button\"\n          category=\"plain\"\n          (click)=\"iconButtonClick()\"\n          role=\"button\"\n          [attr.aria-label]=\"\n            (config.label | translate) +\n            ' ' +\n            (config.iconButton.ariaText | translate)\n          \"\n        ></button>\n        <i [class]=\"config.iconButton.iconClass\"></i>\n      </div>\n    </span>\n  </label>\n</ng-template>\n" }]
        }], ctorParameters: function () { return [{ type: i1.TranslateService }, { type: i2.StandAloneFunctions }, { type: i3.LabelButtonService }]; }, propDecorators: { config: [{
                type: Input
            }], formGroup: [{
                type: Input
            }], errorMessages: [{
                type: Input
            }], parentID: [{
                type: Input
            }], label: [{
                type: Input
            }], desc: [{
                type: Input
            }], hint: [{
                type: Input
            }], required: [{
                type: Input
            }], iconButton: [{
                type: Input
            }], topLabel: [{
                type: Input
            }], touched: [{
                type: Input
            }], legend: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibGFiZWwuY29tcG9uZW50LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiLi4vLi4vLi4vLi4vLi4vLi4vY29tcG9uZW50LWxpYi9zcmMvbGliL3NoYXJlZC9sYWJlbC9sYWJlbC5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnQtbGliL3NyYy9saWIvc2hhcmVkL2xhYmVsL2xhYmVsLmNvbXBvbmVudC5odG1sIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sRUFBRSxTQUFTLEVBQWdCLEtBQUssRUFBa0IsTUFBTSxlQUFlLENBQUM7QUFDL0UsT0FBTyxFQUFFLFNBQVMsRUFBRSxNQUFNLGdCQUFnQixDQUFDOzs7Ozs7QUEwQjNDLE1BQU0sQ0FBQyxNQUFNLGVBQWUsR0FBRztJQUM3QixFQUFFLEVBQUUsT0FBTztJQUNYLEVBQUUsRUFBRSxRQUFRO0NBQ2IsQ0FBQztBQUVGLE1BQU0sQ0FBQyxNQUFNLGFBQWEsR0FBRztJQUMzQixFQUFFLEVBQUUsb0JBQW9CO0lBQ3hCLEVBQUUsRUFBRSxzQkFBc0I7Q0FDM0IsQ0FBQztBQU1GLE1BQU0sT0FBTyxjQUFjO0lBb0J6QixZQUNVLFNBQTJCLEVBQzVCLG1CQUF3QyxFQUN2QyxXQUErQjtRQUYvQixjQUFTLEdBQVQsU0FBUyxDQUFrQjtRQUM1Qix3QkFBbUIsR0FBbkIsbUJBQW1CLENBQXFCO1FBQ3ZDLGdCQUFXLEdBQVgsV0FBVyxDQUFvQjtRQXRCaEMsV0FBTSxHQUFpQjtZQUM5QixTQUFTLEVBQUUsSUFBSSxTQUFTLENBQUMsRUFBRSxDQUFDO1lBQzVCLFFBQVEsRUFBRSxFQUFFO1lBQ1osTUFBTSxFQUFFLEtBQUs7U0FDZCxDQUFDO1FBYUYsa0JBQWEsR0FBRyxFQUFFLENBQUM7SUFNaEIsQ0FBQztJQUVKLFFBQVE7UUFDTixnREFBZ0Q7UUFDaEQsSUFBSSxJQUFJLENBQUMsU0FBUztZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsU0FBUyxHQUFHLElBQUksQ0FBQyxTQUFTLENBQUM7UUFDM0QsSUFBSSxJQUFJLENBQUMsYUFBYTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsYUFBYSxHQUFHLElBQUksQ0FBQyxhQUFhLENBQUM7UUFDdkUsSUFBSSxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDeEQsSUFBSSxJQUFJLENBQUMsS0FBSztZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQyxLQUFLLENBQUM7UUFDL0MsSUFBSSxJQUFJLENBQUMsSUFBSTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUMsSUFBSSxJQUFJLENBQUMsSUFBSTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQyxJQUFJLENBQUM7UUFDNUMsSUFBSSxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDeEQsSUFBSSxJQUFJLENBQUMsVUFBVTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsVUFBVSxHQUFHLElBQUksQ0FBQyxVQUFVLENBQUM7UUFDOUQsSUFBSSxJQUFJLENBQUMsUUFBUTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxHQUFHLElBQUksQ0FBQyxRQUFRLENBQUM7UUFDeEQsSUFBSSxJQUFJLENBQUMsT0FBTztZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsT0FBTyxHQUFHLElBQUksQ0FBQyxPQUFPLENBQUM7UUFDckQsSUFBSSxJQUFJLENBQUMsTUFBTTtZQUFFLElBQUksQ0FBQyxNQUFNLENBQUMsTUFBTSxHQUFHLElBQUksQ0FBQyxNQUFNLENBQUM7UUFFbEQsSUFBSSxDQUFDLE9BQU8sQ0FBQyxJQUFJLENBQUMsU0FBUyxDQUFDLFdBQVcsQ0FBQyxDQUFDO1FBQ3pDLElBQUksQ0FBQyxTQUFTLENBQUMsWUFBWSxDQUFDLFNBQVMsQ0FBQyxDQUFDLE1BQU0sRUFBRSxFQUFFO1lBQy9DLElBQUksQ0FBQyxPQUFPLENBQUMsTUFBTSxDQUFDLElBQUksQ0FBQyxDQUFDO1FBQzVCLENBQUMsQ0FBQyxDQUFDO0lBQ0wsQ0FBQztJQUVELE9BQU8sQ0FBQyxJQUFZO1FBQ2xCLElBQUksSUFBSSxLQUFLLElBQUksSUFBSSxJQUFJLEtBQUssT0FBTyxFQUFFO1lBQ3JDLDJDQUEyQztZQUMzQyxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQyxFQUFFLENBQUM7U0FDdkM7YUFBTTtZQUNMLDJDQUEyQztZQUMzQyxJQUFJLENBQUMsYUFBYSxHQUFHLGFBQWEsQ0FBQyxFQUFFLENBQUM7U0FDdkM7SUFDSCxDQUFDO0lBRUQ7OztPQUdHO0lBQ0gsZUFBZTtRQUNiLElBQUksQ0FBQyxXQUFXLENBQUMsV0FBVyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsUUFBUSxDQUFDLENBQUM7SUFDckQsQ0FBQztJQUVELFdBQVc7UUFDVCxPQUFPLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxRQUFRLENBQUMsQ0FBQyxDQUFDLElBQUksQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLENBQUMsQ0FBQyxJQUFJLENBQUMsTUFBTSxDQUFDLFFBQVEsQ0FBQztJQUMxRSxDQUFDOzs0R0FsRVUsY0FBYztnR0FBZCxjQUFjLDZUQ3pDM0Isa29GQStGQTs0RkR0RGEsY0FBYztrQkFKMUIsU0FBUzsrQkFDRSxtQkFBbUI7MEtBSXBCLE1BQU07c0JBQWQsS0FBSztnQkFLRyxTQUFTO3NCQUFqQixLQUFLO2dCQUNHLGFBQWE7c0JBQXJCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxLQUFLO3NCQUFiLEtBQUs7Z0JBQ0csSUFBSTtzQkFBWixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFDRyxRQUFRO3NCQUFoQixLQUFLO2dCQUNHLFVBQVU7c0JBQWxCLEtBQUs7Z0JBQ0csUUFBUTtzQkFBaEIsS0FBSztnQkFDRyxPQUFPO3NCQUFmLEtBQUs7Z0JBQ0csTUFBTTtzQkFBZCxLQUFLIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IHsgQ29tcG9uZW50LCBFdmVudEVtaXR0ZXIsIElucHV0LCBPbkluaXQsIE91dHB1dCB9IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgRm9ybUdyb3VwIH0gZnJvbSAnQGFuZ3VsYXIvZm9ybXMnO1xuaW1wb3J0IHsgVHJhbnNsYXRlU2VydmljZSB9IGZyb20gJ0BuZ3gtdHJhbnNsYXRlL2NvcmUnO1xuaW1wb3J0IHsgU3RhbmRBbG9uZUZ1bmN0aW9ucyB9IGZyb20gJy4uLy4uLy4uL3NoYXJlZC9mdW5jdGlvbnMvc3RhbmQtYWxvbmUuZnVuY3Rpb25zJztcbmltcG9ydCB7IElFcnJvclBhaXJzIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2ludGVyZmFjZXMvY29tcG9uZW50LWNvbmZpZ3MnO1xuaW1wb3J0IHsgTGFiZWxCdXR0b25TZXJ2aWNlIH0gZnJvbSAnLi9sYWJlbC1idXR0b24uc2VydmljZSc7XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUxhYmVsSWNvbkNvbmZpZyB7XG4gIGljb25DbGFzczogc3RyaW5nO1xuICBjb2xvdXI/OiBzdHJpbmc7IC8vRGVmYXVsdCBpcyB0ZXh0IHByaW1hcnkgdG9rZW5cbiAgYXJpYVRleHQ6IHN0cmluZztcbn1cblxuZXhwb3J0IGludGVyZmFjZSBJTGFiZWxDb25maWcge1xuICBmb3JtR3JvdXA6IEZvcm1Hcm91cDtcbiAgZXJyb3JNZXNzYWdlcz86IElFcnJvclBhaXJzW107XG4gIHBhcmVudElEOiBzdHJpbmc7XG4gIGxhYmVsPzogc3RyaW5nO1xuICBkZXNjPzogc3RyaW5nO1xuICBoaW50Pzogc3RyaW5nO1xuICByZXF1aXJlZD86IGJvb2xlYW47XG4gIGljb25CdXR0b24/OiBJTGFiZWxJY29uQ29uZmlnO1xuICB0b3BMYWJlbD86IHN0cmluZztcbiAgdG91Y2hlZD86IGJvb2xlYW47XG4gIGxlZ2VuZD86IGJvb2xlYW47XG59XG5cbmV4cG9ydCBjb25zdCBFUlJPUl9URVhUX1NUVUIgPSB7XG4gIGVuOiAnRXJyb3InLFxuICBmcjogJ0VycmV1cidcbn07XG5cbmV4cG9ydCBjb25zdCBIRUxQX0lDT05fQUxUID0ge1xuICBlbjogJywgbW9yZSBpbmZvcm1hdGlvbicsXG4gIGZyOiBcIiwgcGx1cyBkJ2luZm9ybWF0aW9uXCJcbn07XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2lyY2MtY2wtbGliLWxhYmVsJyxcbiAgdGVtcGxhdGVVcmw6ICcuL2xhYmVsLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBMYWJlbENvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCB7XG4gIEBJbnB1dCgpIGNvbmZpZzogSUxhYmVsQ29uZmlnID0ge1xuICAgIGZvcm1Hcm91cDogbmV3IEZvcm1Hcm91cCh7fSksXG4gICAgcGFyZW50SUQ6ICcnLFxuICAgIGxlZ2VuZDogZmFsc2VcbiAgfTtcbiAgQElucHV0KCkgZm9ybUdyb3VwPzogRm9ybUdyb3VwO1xuICBASW5wdXQoKSBlcnJvck1lc3NhZ2VzPzogSUVycm9yUGFpcnNbXTtcbiAgQElucHV0KCkgcGFyZW50SUQ/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGxhYmVsPzogc3RyaW5nO1xuICBASW5wdXQoKSBkZXNjPzogc3RyaW5nO1xuICBASW5wdXQoKSBoaW50Pzogc3RyaW5nO1xuICBASW5wdXQoKSByZXF1aXJlZD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIGljb25CdXR0b24/OiBJTGFiZWxJY29uQ29uZmlnO1xuICBASW5wdXQoKSB0b3BMYWJlbD86IHN0cmluZztcbiAgQElucHV0KCkgdG91Y2hlZD86IGJvb2xlYW47XG4gIEBJbnB1dCgpIGxlZ2VuZD86IGJvb2xlYW47XG5cbiAgbGFiZWxJY29uVGV4dCA9ICcnO1xuXG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgdHJhbnNsYXRlOiBUcmFuc2xhdGVTZXJ2aWNlLFxuICAgIHB1YmxpYyBzdGFuZEFsb25lRnVuY3Rpb25zOiBTdGFuZEFsb25lRnVuY3Rpb25zLFxuICAgIHByaXZhdGUgbGFiZWxCdXR0b246IExhYmVsQnV0dG9uU2VydmljZVxuICApIHt9XG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLy9zZXQgY29uZmlnIGZyb20gaW5kaXZpZHVhbCBvcHRpb25zLCBpZiBwcmVzZW50XG4gICAgaWYgKHRoaXMuZm9ybUdyb3VwKSB0aGlzLmNvbmZpZy5mb3JtR3JvdXAgPSB0aGlzLmZvcm1Hcm91cDtcbiAgICBpZiAodGhpcy5lcnJvck1lc3NhZ2VzKSB0aGlzLmNvbmZpZy5lcnJvck1lc3NhZ2VzID0gdGhpcy5lcnJvck1lc3NhZ2VzO1xuICAgIGlmICh0aGlzLnBhcmVudElEKSB0aGlzLmNvbmZpZy5wYXJlbnRJRCA9IHRoaXMucGFyZW50SUQ7XG4gICAgaWYgKHRoaXMubGFiZWwpIHRoaXMuY29uZmlnLmxhYmVsID0gdGhpcy5sYWJlbDtcbiAgICBpZiAodGhpcy5kZXNjKSB0aGlzLmNvbmZpZy5kZXNjID0gdGhpcy5kZXNjO1xuICAgIGlmICh0aGlzLmhpbnQpIHRoaXMuY29uZmlnLmhpbnQgPSB0aGlzLmhpbnQ7XG4gICAgaWYgKHRoaXMucmVxdWlyZWQpIHRoaXMuY29uZmlnLnJlcXVpcmVkID0gdGhpcy5yZXF1aXJlZDtcbiAgICBpZiAodGhpcy5pY29uQnV0dG9uKSB0aGlzLmNvbmZpZy5pY29uQnV0dG9uID0gdGhpcy5pY29uQnV0dG9uO1xuICAgIGlmICh0aGlzLnRvcExhYmVsKSB0aGlzLmNvbmZpZy50b3BMYWJlbCA9IHRoaXMudG9wTGFiZWw7XG4gICAgaWYgKHRoaXMudG91Y2hlZCkgdGhpcy5jb25maWcudG91Y2hlZCA9IHRoaXMudG91Y2hlZDtcbiAgICBpZiAodGhpcy5sZWdlbmQpIHRoaXMuY29uZmlnLmxlZ2VuZCA9IHRoaXMubGVnZW5kO1xuXG4gICAgdGhpcy5zZXRMYW5nKHRoaXMudHJhbnNsYXRlLmN1cnJlbnRMYW5nKTtcbiAgICB0aGlzLnRyYW5zbGF0ZS5vbkxhbmdDaGFuZ2Uuc3Vic2NyaWJlKChjaGFuZ2UpID0+IHtcbiAgICAgIHRoaXMuc2V0TGFuZyhjaGFuZ2UubGFuZyk7XG4gICAgfSk7XG4gIH1cblxuICBzZXRMYW5nKGxhbmc6IHN0cmluZykge1xuICAgIGlmIChsYW5nID09PSAnZW4nIHx8IGxhbmcgPT09ICdlbi1VUycpIHtcbiAgICAgIC8vIHRoaXMuZXJyb3JTdHViVGV4dCA9IEVSUk9SX1RFWFRfU1RVQl9FTjtcbiAgICAgIHRoaXMubGFiZWxJY29uVGV4dCA9IEhFTFBfSUNPTl9BTFQuZW47XG4gICAgfSBlbHNlIHtcbiAgICAgIC8vIHRoaXMuZXJyb3JTdHViVGV4dCA9IEVSUk9SX1RFWFRfU1RVQl9GUjtcbiAgICAgIHRoaXMubGFiZWxJY29uVGV4dCA9IEhFTFBfSUNPTl9BTFQuZnI7XG4gICAgfVxuICB9XG5cbiAgLyoqXG4gICAqIE91dHB1dCB0aGUgYnV0dG9uIHByZXNzXG4gICAqIEBwYXJhbSBpZCBvZiB0aGUgYnV0dG9uIGJlaW5nIHByZXNzZWQgKHNhbWUgYXMgY29tcG9uZW50IElEKVxuICAgKi9cbiAgaWNvbkJ1dHRvbkNsaWNrKCkge1xuICAgIHRoaXMubGFiZWxCdXR0b24uYnV0dG9uUHJlc3ModGhpcy5jb25maWcucGFyZW50SUQpO1xuICB9XG5cbiAgcmV0dXJuTGFiZWwoKSB7XG4gICAgcmV0dXJuICF0aGlzLmNvbmZpZy50b3BMYWJlbCA/IHRoaXMuY29uZmlnLmxhYmVsIDogdGhpcy5jb25maWcudG9wTGFiZWw7XG4gIH1cbn1cbiIsIjxkaXZcbiAgaWQ9XCJ7eyBjb25maWcucGFyZW50SUQgKyAnX2xhYmVsJyB9fVwiXG4gIGNsYXNzPVwibGFiZWxfY29udGFpbmVyXCJcbiAgW25nQ2xhc3NdPVwieyBleHRyYV9wYWRkaW5nOiBjb25maWcubGFiZWwgJiYgIWNvbmZpZy5kZXNjICYmICFjb25maWcuaGludCB9XCJcbj5cbiAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbmZpZy5sZWdlbmQgPT09IHRydWU7IGVsc2Ugbm9MZWdlbmRcIj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiY29uZmlnLmxhYmVsXCI+XG4gICAgICA8ZGl2XG4gICAgICAgICpuZ0lmPVwiY29uZmlnLmxhYmVsXCJcbiAgICAgICAgY2xhc3M9XCJsYWJlbFwiXG4gICAgICAgIFthdHRyLmZvcl09XCJjb25maWcucGFyZW50SURcIlxuICAgICAgPlxuICAgICAgICA8ZGl2IGNsYXNzPVwibGFiZWxfZmllbGRfY29udGFpbmVyXCI+XG4gICAgICAgICAgPGRpdlxuICAgICAgICAgICAgY2xhc3M9XCJyZXF1aXJlZC1maWVsZC1jb250YWluZXJcIlxuICAgICAgICAgICAgKm5nSWY9XCJjb25maWcucmVxdWlyZWRcIlxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1hc3RlcmlzayByZXF1aXJlZC1zdGFyXCI+PC9pPlxuICAgICAgICAgICAge3sgY29uZmlnLmxhYmVsIHx8ICcnIHwgdHJhbnNsYXRlIH19XG4gICAgICAgICAgPC9kaXY+XG4gICAgICAgICAgPGRpdiAqbmdJZj1cIiFjb25maWcucmVxdWlyZWRcIj5cbiAgICAgICAgICAgIHt7IGNvbmZpZy5sYWJlbCB8fCAnJyB8IHRyYW5zbGF0ZSB9fVxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICAgIDxkaXZcbiAgICAgICAgICAgICpuZ0lmPVwiY29uZmlnLmljb25CdXR0b25cIlxuICAgICAgICAgICAgY2xhc3M9XCJpY29uX2NvbnRhaW5lclwiXG4gICAgICAgICAgPlxuICAgICAgICAgICAgPGJ1dHRvblxuICAgICAgICAgICAgICBjbGFzcz1cInRvdWNoX2J1dHRvblwiXG4gICAgICAgICAgICAgIGNhdGVnb3J5PVwicGxhaW5cIlxuICAgICAgICAgICAgICAoY2xpY2spPVwiaWNvbkJ1dHRvbkNsaWNrKClcIlxuICAgICAgICAgICAgICByb2xlPVwiYnV0dG9uXCJcbiAgICAgICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICAgICAgICAoY29uZmlnLmxhYmVsIHwgdHJhbnNsYXRlKSArXG4gICAgICAgICAgICAgICAgJyAnICtcbiAgICAgICAgICAgICAgICAoY29uZmlnLmljb25CdXR0b24uYXJpYVRleHQgfCB0cmFuc2xhdGUpXG4gICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICA+PC9idXR0b24+XG4gICAgICAgICAgICA8aSBbY2xhc3NdPVwiY29uZmlnLmljb25CdXR0b24uaWNvbkNsYXNzXCI+PC9pPlxuICAgICAgICAgIDwvZGl2PlxuICAgICAgICA8L2Rpdj5cbiAgICAgIDwvZGl2PlxuICAgIDwvbmctY29udGFpbmVyPlxuICA8L25nLWNvbnRhaW5lcj5cbiAgPHBcbiAgICAqbmdJZj1cImNvbmZpZy5kZXNjXCJcbiAgICBjbGFzcz1cImlucHV0LWRlc2NcIlxuICA+XG4gICAge3sgY29uZmlnLmRlc2MgfHwgJycgfCB0cmFuc2xhdGUgfX1cbiAgPC9wPlxuICA8cFxuICAgICpuZ0lmPVwiY29uZmlnLmhpbnRcIlxuICAgIGNsYXNzPVwiaW5wdXQtaGludFwiXG4gID5cbiAgICB7eyBjb25maWcuaGludCB8IHRyYW5zbGF0ZSB9fVxuICA8L3A+XG48L2Rpdj5cblxuPG5nLXRlbXBsYXRlICNub0xlZ2VuZD5cbiAgPGxhYmVsXG4gICAgKm5nSWY9XCJjb25maWcubGFiZWxcIlxuICAgIGNsYXNzPVwibGFiZWxcIlxuICAgIFthdHRyLmZvcl09XCJjb25maWcucGFyZW50SURcIlxuICA+XG4gICAgPHNwYW4gY2xhc3M9XCJsYWJlbF9maWVsZF9jb250YWluZXJcIj5cbiAgICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJyZXF1aXJlZC1maWVsZC1jb250YWluZXJcIlxuICAgICAgICAqbmdJZj1cImNvbmZpZy5yZXF1aXJlZFwiXG4gICAgICA+XG4gICAgICAgIDxpIGNsYXNzPVwiZmEtcmVndWxhciBmYS1hc3RlcmlzayByZXF1aXJlZC1zdGFyXCI+PC9pXG4gICAgICAgID57eyBjb25maWcubGFiZWwgfHwgJycgfCB0cmFuc2xhdGUgfX1cbiAgICAgIDwvZGl2PlxuICAgICAgPGRpdiAqbmdJZj1cIiFjb25maWcucmVxdWlyZWRcIj5cbiAgICAgICAge3sgY29uZmlnLmxhYmVsIHx8ICcnIHwgdHJhbnNsYXRlIH19XG4gICAgICA8L2Rpdj5cbiAgICAgIDxkaXZcbiAgICAgICAgKm5nSWY9XCJjb25maWcuaWNvbkJ1dHRvblwiXG4gICAgICAgIGNsYXNzPVwiaWNvbl9jb250YWluZXJcIlxuICAgICAgPlxuICAgICAgICA8YnV0dG9uXG4gICAgICAgICAgY2xhc3M9XCJ0b3VjaF9idXR0b25cIlxuICAgICAgICAgIGNhdGVnb3J5PVwicGxhaW5cIlxuICAgICAgICAgIChjbGljayk9XCJpY29uQnV0dG9uQ2xpY2soKVwiXG4gICAgICAgICAgcm9sZT1cImJ1dHRvblwiXG4gICAgICAgICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAgICAgICAgIChjb25maWcubGFiZWwgfCB0cmFuc2xhdGUpICtcbiAgICAgICAgICAgICcgJyArXG4gICAgICAgICAgICAoY29uZmlnLmljb25CdXR0b24uYXJpYVRleHQgfCB0cmFuc2xhdGUpXG4gICAgICAgICAgXCJcbiAgICAgICAgPjwvYnV0dG9uPlxuICAgICAgICA8aSBbY2xhc3NdPVwiY29uZmlnLmljb25CdXR0b24uaWNvbkNsYXNzXCI+PC9pPlxuICAgICAgPC9kaXY+XG4gICAgPC9zcGFuPlxuICA8L2xhYmVsPlxuPC9uZy10ZW1wbGF0ZT5cbiJdfQ==