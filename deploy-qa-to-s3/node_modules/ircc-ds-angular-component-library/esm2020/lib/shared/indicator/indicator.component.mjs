import { Component, Input, ViewChild } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "@angular/common";
import * as i2 from "../icon/icon.component";
import * as i3 from "@ngx-translate/core";
export var IndicatorType;
(function (IndicatorType) {
    IndicatorType[IndicatorType["dot"] = 0] = "dot";
    IndicatorType[IndicatorType["text"] = 1] = "text";
    IndicatorType[IndicatorType["number"] = 2] = "number";
})(IndicatorType || (IndicatorType = {}));
export var IndicatorTreatment;
(function (IndicatorTreatment) {
    IndicatorTreatment["strong"] = "strong";
    IndicatorTreatment["weak"] = "weak";
})(IndicatorTreatment || (IndicatorTreatment = {}));
export var IndicatorPurpose;
(function (IndicatorPurpose) {
    IndicatorPurpose["status"] = "status";
    IndicatorPurpose["palette"] = "palette";
})(IndicatorPurpose || (IndicatorPurpose = {}));
export var IndicatorStatus;
(function (IndicatorStatus) {
    IndicatorStatus["information"] = "information";
    IndicatorStatus["warning"] = "warning";
    IndicatorStatus["critical"] = "critical";
    IndicatorStatus["neutral"] = "neutral";
    IndicatorStatus["primary"] = "primary";
    IndicatorStatus["success"] = "success";
})(IndicatorStatus || (IndicatorStatus = {}));
export var IndicatorPalette;
(function (IndicatorPalette) {
    IndicatorPalette[IndicatorPalette["teal"] = 0] = "teal";
    IndicatorPalette[IndicatorPalette["orange"] = 1] = "orange";
    IndicatorPalette[IndicatorPalette["red"] = 2] = "red";
    IndicatorPalette[IndicatorPalette["grey"] = 3] = "grey";
    IndicatorPalette[IndicatorPalette["blue"] = 4] = "blue";
    IndicatorPalette[IndicatorPalette["green"] = 5] = "green";
    IndicatorPalette[IndicatorPalette["purple"] = 6] = "purple";
    IndicatorPalette[IndicatorPalette["navy"] = 7] = "navy";
})(IndicatorPalette || (IndicatorPalette = {}));
export class IndicatorComponent {
    constructor() {
        this.config = {
            type: 'text',
            category: IndicatorTreatment.weak,
            purpose: IndicatorPurpose.status,
            tabIndex: -1
        };
        this.tabIndex = undefined;
        this.EIndicatorStatus = IndicatorStatus;
    }
    ngOnInit() {
        //set config from individual options, if present
        if (this.size)
            this.config.size = this.size;
        if (this.type)
            this.config.type = this.type;
        if (this.icon)
            this.config.icon = this.icon;
        if (this.category)
            this.config.category = this.category;
        if (this.purpose)
            this.config.purpose = this.purpose;
        if (this.status)
            this.config.status = this.status;
        if (this.palette)
            this.config.palette = this.palette;
        if (this.ariaLabel)
            this.config.ariaLabel = this.ariaLabel;
        if (!this.tabIndex)
            this.config.tabIndex = -1;
        this.checkLabelRounded();
        this.checkNumber();
        this.tabIndex !== undefined
            ? (this.config.tabIndex = this.tabIndex)
            : undefined;
    }
    ngAfterViewInit() {
        setTimeout(() => this.checkLabelLength());
    }
    ngOnChanges(changes) {
        this.checkNumber();
        this.checkLabelRounded();
        this.checkLabelLength();
        setTimeout(() => this.checkLabelLength());
    }
    // Check if number exceeds 99
    checkNumber() {
        if (this.config.type === 'number' &&
            this.config?.label &&
            this.config.label > 99) {
            this.config.label = '99+';
        }
    }
    // If label only have 1 character, it should be rounded
    checkLabelRounded() {
        if (typeof this.config?.label === 'string') {
            this.rounded = this.config.label.length == 1 && !this.config.icon;
        }
    }
    // Check if div exceeds 200px
    checkLabelLength() {
        if (this.config.type !== 'text')
            return;
        // Max 200px - padding 8px x2
        this.abbr = ((this.label?.nativeElement?.offsetWidth &&
            this.label?.nativeElement?.offsetWidth > 184));
    }
}
IndicatorComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: IndicatorComponent, deps: [], target: i0.ɵɵFactoryTarget.Component });
IndicatorComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.12", type: IndicatorComponent, selector: "ircc-cl-lib-indicator", inputs: { config: "config", size: "size", type: "type", icon: "icon", category: "category", purpose: "purpose", status: "status", palette: "palette", ariaLabel: "ariaLabel", tabIndex: "tabIndex" }, viewQueries: [{ propertyName: "label", first: true, predicate: ["label"], descendants: true }], usesOnChanges: true, ngImport: i0, template: "<div\n  [ngClass]=\"['indicator-container', config.size ?? '']\"\n    [attr.aria-label]=\"\n    (config.ariaLabel ?? 'Indicator.Heading' | translate) +\n    ' ' +\n    (config.label ?? '')\n  \"\n  [tabindex]=\"config.tabIndex\"\n  role=\"group\"\n>\n  <div\n    *ngIf=\"config.type === 'text' || config.type === 'number'\"\n    #label\n    [ngClass]=\"[\n      config.type,\n      config.category,\n      config.purpose === 'status'\n        ? EIndicatorStatus[config.status ?? 'information']\n        : '',\n      config.purpose === 'palette' ? config.palette : '',\n      rounded ? 'rounded' : '',\n      config.label === '99+' ? 'num-lg' : '',\n      abbr ? 'abbr' : ''\n    ]\"\n  >\n    <ircc-cl-lib-icon\n      *ngIf=\"config.type === 'text' && config?.icon\"\n      [config]=\"{ FA_keywords: config.icon }\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n    <ng-container *ngIf=\"abbr; else nonAbbr\">\n      <span class=\"abbr\"\n        ><abbr [title]=\"config.label\">{{ config.label }}</abbr></span\n      >\n    </ng-container>\n    <ng-template #nonAbbr>\n      <span>{{ config.label }}</span>\n    </ng-template>\n  </div>\n  <span\n    *ngIf=\"config.type === 'dot'\"\n    [ngClass]=\"[\n      config.icon ? 'dot-icon' : '',\n      config.type,\n      config.category,\n      config.purpose === 'status'\n        ? EIndicatorStatus[config.status ?? 'information']\n        : '',\n      config.purpose === 'palette' ? config.palette : ''\n    ]\"\n  >\n    <ircc-cl-lib-icon\n      *ngIf=\"config?.icon\"\n      [config]=\"{ FA_keywords: config.icon }\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n  </span>\n</div>\n", dependencies: [{ kind: "directive", type: i1.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i1.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "component", type: i2.IconComponent, selector: "ircc-cl-lib-icon", inputs: ["config", "ariaLabel", "FA_keywords", "size"] }, { kind: "pipe", type: i3.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: IndicatorComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ircc-cl-lib-indicator', template: "<div\n  [ngClass]=\"['indicator-container', config.size ?? '']\"\n    [attr.aria-label]=\"\n    (config.ariaLabel ?? 'Indicator.Heading' | translate) +\n    ' ' +\n    (config.label ?? '')\n  \"\n  [tabindex]=\"config.tabIndex\"\n  role=\"group\"\n>\n  <div\n    *ngIf=\"config.type === 'text' || config.type === 'number'\"\n    #label\n    [ngClass]=\"[\n      config.type,\n      config.category,\n      config.purpose === 'status'\n        ? EIndicatorStatus[config.status ?? 'information']\n        : '',\n      config.purpose === 'palette' ? config.palette : '',\n      rounded ? 'rounded' : '',\n      config.label === '99+' ? 'num-lg' : '',\n      abbr ? 'abbr' : ''\n    ]\"\n  >\n    <ircc-cl-lib-icon\n      *ngIf=\"config.type === 'text' && config?.icon\"\n      [config]=\"{ FA_keywords: config.icon }\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n    <ng-container *ngIf=\"abbr; else nonAbbr\">\n      <span class=\"abbr\"\n        ><abbr [title]=\"config.label\">{{ config.label }}</abbr></span\n      >\n    </ng-container>\n    <ng-template #nonAbbr>\n      <span>{{ config.label }}</span>\n    </ng-template>\n  </div>\n  <span\n    *ngIf=\"config.type === 'dot'\"\n    [ngClass]=\"[\n      config.icon ? 'dot-icon' : '',\n      config.type,\n      config.category,\n      config.purpose === 'status'\n        ? EIndicatorStatus[config.status ?? 'information']\n        : '',\n      config.purpose === 'palette' ? config.palette : ''\n    ]\"\n  >\n    <ircc-cl-lib-icon\n      *ngIf=\"config?.icon\"\n      [config]=\"{ FA_keywords: config.icon }\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n  </span>\n</div>\n" }]
        }], propDecorators: { config: [{
                type: Input
            }], size: [{
                type: Input
            }], type: [{
                type: Input
            }], icon: [{
                type: Input
            }], category: [{
                type: Input
            }], purpose: [{
                type: Input
            }], status: [{
                type: Input
            }], palette: [{
                type: Input
            }], ariaLabel: [{
                type: Input
            }], tabIndex: [{
                type: Input
            }], label: [{
                type: ViewChild,
                args: ['label', { static: false }]
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW5kaWNhdG9yLmNvbXBvbmVudC5qcyIsInNvdXJjZVJvb3QiOiIiLCJzb3VyY2VzIjpbIi4uLy4uLy4uLy4uLy4uLy4uL2NvbXBvbmVudC1saWIvc3JjL2xpYi9zaGFyZWQvaW5kaWNhdG9yL2luZGljYXRvci5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnQtbGliL3NyYy9saWIvc2hhcmVkL2luZGljYXRvci9pbmRpY2F0b3IuY29tcG9uZW50Lmh0bWwiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6IkFBQUEsT0FBTyxFQUVMLFNBQVMsRUFFVCxLQUFLLEVBSUwsU0FBUyxFQUNWLE1BQU0sZUFBZSxDQUFDOzs7OztBQUd2QixNQUFNLENBQU4sSUFBWSxhQUlYO0FBSkQsV0FBWSxhQUFhO0lBQ3ZCLCtDQUFHLENBQUE7SUFDSCxpREFBSSxDQUFBO0lBQ0oscURBQU0sQ0FBQTtBQUNSLENBQUMsRUFKVyxhQUFhLEtBQWIsYUFBYSxRQUl4QjtBQUVELE1BQU0sQ0FBTixJQUFZLGtCQUdYO0FBSEQsV0FBWSxrQkFBa0I7SUFDNUIsdUNBQWlCLENBQUE7SUFDakIsbUNBQWEsQ0FBQTtBQUNmLENBQUMsRUFIVyxrQkFBa0IsS0FBbEIsa0JBQWtCLFFBRzdCO0FBRUQsTUFBTSxDQUFOLElBQVksZ0JBR1g7QUFIRCxXQUFZLGdCQUFnQjtJQUMxQixxQ0FBaUIsQ0FBQTtJQUNqQix1Q0FBbUIsQ0FBQTtBQUNyQixDQUFDLEVBSFcsZ0JBQWdCLEtBQWhCLGdCQUFnQixRQUczQjtBQUVELE1BQU0sQ0FBTixJQUFZLGVBT1g7QUFQRCxXQUFZLGVBQWU7SUFDekIsOENBQTJCLENBQUE7SUFDM0Isc0NBQW1CLENBQUE7SUFDbkIsd0NBQXFCLENBQUE7SUFDckIsc0NBQW1CLENBQUE7SUFDbkIsc0NBQW1CLENBQUE7SUFDbkIsc0NBQW1CLENBQUE7QUFDckIsQ0FBQyxFQVBXLGVBQWUsS0FBZixlQUFlLFFBTzFCO0FBRUQsTUFBTSxDQUFOLElBQVksZ0JB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cG9ydCB7XG4gIEFmdGVyVmlld0luaXQsXG4gIENvbXBvbmVudCxcbiAgRWxlbWVudFJlZixcbiAgSW5wdXQsXG4gIE9uQ2hhbmdlcyxcbiAgT25Jbml0LFxuICBTaW1wbGVDaGFuZ2VzLFxuICBWaWV3Q2hpbGRcbn0gZnJvbSAnQGFuZ3VsYXIvY29yZSc7XG5pbXBvcnQgeyBEU1NpemVzIH0gZnJvbSAnLi4vLi4vLi4vc2hhcmVkL2NvbnN0YW50cy9qbC1jb21wb25lbnRzLmNvbnN0YW50cyc7XG5cbmV4cG9ydCBlbnVtIEluZGljYXRvclR5cGUge1xuICBkb3QsXG4gIHRleHQsXG4gIG51bWJlclxufVxuXG5leHBvcnQgZW51bSBJbmRpY2F0b3JUcmVhdG1lbnQge1xuICBzdHJvbmcgPSAnc3Ryb25nJyxcbiAgd2VhayA9ICd3ZWFrJ1xufVxuXG5leHBvcnQgZW51bSBJbmRpY2F0b3JQdXJwb3NlIHtcbiAgc3RhdHVzID0gJ3N0YXR1cycsXG4gIHBhbGV0dGUgPSAncGFsZXR0ZSdcbn1cblxuZXhwb3J0IGVudW0gSW5kaWNhdG9yU3RhdHVzIHtcbiAgaW5mb3JtYXRpb24gPSAnaW5mb3JtYXRpb24nLFxuICB3YXJuaW5nID0gJ3dhcm5pbmcnLFxuICBjcml0aWNhbCA9ICdjcml0aWNhbCcsXG4gIG5ldXRyYWwgPSAnbmV1dHJhbCcsXG4gIHByaW1hcnkgPSAncHJpbWFyeScsXG4gIHN1Y2Nlc3MgPSAnc3VjY2Vzcydcbn1cblxuZXhwb3J0IGVudW0gSW5kaWNhdG9yUGFsZXR0ZSB7XG4gIHRlYWwsXG4gIG9yYW5nZSxcbiAgcmVkLFxuICBncmV5LFxuICBibHVlLFxuICBncmVlbixcbiAgcHVycGxlLFxuICBuYXZ5XG59XG5cbmV4cG9ydCBpbnRlcmZhY2UgSUluZGljYXRvckNvbmZpZyB7XG4gIGxhYmVsPzogc3RyaW5nIHwgbnVtYmVyO1xuICBzaXplPzoga2V5b2YgdHlwZW9mIERTU2l6ZXM7XG4gIHR5cGU6IGtleW9mIHR5cGVvZiBJbmRpY2F0b3JUeXBlO1xuICBpY29uPzogc3RyaW5nO1xuICB0YWJJbmRleD86IG51bWJlciB8IHVuZGVmaW5lZDtcbiAgY2F0ZWdvcnk6IGtleW9mIHR5cGVvZiBJbmRpY2F0b3JUcmVhdG1lbnQ7IC8vIFRyZWF0bWVudFxuICBwdXJwb3NlOiBrZXlvZiB0eXBlb2YgSW5kaWNhdG9yUHVycG9zZTtcbiAgc3RhdHVzPzoga2V5b2YgdHlwZW9mIEluZGljYXRvclN0YXR1czsgLy8gU2VudGltZW50XG4gIHBhbGV0dGU/OiBrZXlvZiB0eXBlb2YgSW5kaWNhdG9yUGFsZXR0ZTsgLy8gQ29sb3VyXG4gIGFyaWFMYWJlbD86IHN0cmluZzsgLy8gQXJpYSBsYWJlbCBsaW5lIG9mIHZhbHVlXG59XG5cbkBDb21wb25lbnQoe1xuICBzZWxlY3RvcjogJ2lyY2MtY2wtbGliLWluZGljYXRvcicsXG4gIHRlbXBsYXRlVXJsOiAnLi9pbmRpY2F0b3IuY29tcG9uZW50Lmh0bWwnXG59KVxuZXhwb3J0IGNsYXNzIEluZGljYXRvckNvbXBvbmVudCBpbXBsZW1lbnRzIE9uSW5pdCwgQWZ0ZXJWaWV3SW5pdCwgT25DaGFuZ2VzIHtcbiAgQElucHV0KCkgY29uZmlnOiBJSW5kaWNhdG9yQ29uZmlnID0ge1xuICAgIHR5cGU6ICd0ZXh0JyxcbiAgICBjYXRlZ29yeTogSW5kaWNhdG9yVHJlYXRtZW50LndlYWssXG4gICAgcHVycG9zZTogSW5kaWNhdG9yUHVycG9zZS5zdGF0dXMsXG4gICAgdGFiSW5kZXg6IC0xXG4gIH07XG5cbiAgQElucHV0KCkgc2l6ZT86IGtleW9mIHR5cGVvZiBEU1NpemVzO1xuICBASW5wdXQoKSB0eXBlPzoga2V5b2YgdHlwZW9mIEluZGljYXRvclR5cGU7XG4gIEBJbnB1dCgpIGljb24/OiBzdHJpbmc7XG4gIEBJbnB1dCgpIGNhdGVnb3J5Pzoga2V5b2YgdHlwZW9mIEluZGljYXRvclRyZWF0bWVudDsgLy8gVHJlYXRtZW50XG4gIEBJbnB1dCgpIHB1cnBvc2U/OiBrZXlvZiB0eXBlb2YgSW5kaWNhdG9yUHVycG9zZTtcbiAgQElucHV0KCkgc3RhdHVzPzoga2V5b2YgdHlwZW9mIEluZGljYXRvclN0YXR1czsgLy8gU2VudGltZW50XG4gIEBJbnB1dCgpIHBhbGV0dGU/OiBrZXlvZiB0eXBlb2YgSW5kaWNhdG9yUGFsZXR0ZTsgLy8gQ29sb3VyXG4gIEBJbnB1dCgpIGFyaWFMYWJlbD86IHN0cmluZzsgLy8gQXJpYSBsYWJlbCBsaW5lIG9mIHZhbHVlXG4gIEBJbnB1dCgpIHRhYkluZGV4ID0gdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ2xhYmVsJywgeyBzdGF0aWM6IGZhbHNlIH0pIGxhYmVsPzogRWxlbWVudFJlZjxIVE1MRGl2RWxlbWVudD47XG4gIEVJbmRpY2F0b3JTdGF0dXMgPSBJbmRpY2F0b3JTdGF0dXM7XG4gIHJvdW5kZWQ/OiBib29sZWFuO1xuICBhYmJyPzogYm9vbGVhbjsgLy8gRGlzcGxheSBhYmJyIHRhZyB3aGVuIHRleHQgaXMgdHJ1bmNhdGVkXG5cbiAgbmdPbkluaXQoKSB7XG4gICAgLy9zZXQgY29uZmlnIGZyb20gaW5kaXZpZHVhbCBvcHRpb25zLCBpZiBwcmVzZW50XG4gICAgaWYgKHRoaXMuc2l6ZSkgdGhpcy5jb25maWcuc2l6ZSA9IHRoaXMuc2l6ZTtcbiAgICBpZiAodGhpcy50eXBlKSB0aGlzLmNvbmZpZy50eXBlID0gdGhpcy50eXBlO1xuICAgIGlmICh0aGlzLmljb24pIHRoaXMuY29uZmlnLmljb24gPSB0aGlzLmljb247XG4gICAgaWYgKHRoaXMuY2F0ZWdvcnkpIHRoaXMuY29uZmlnLmNhdGVnb3J5ID0gdGhpcy5jYXRlZ29yeTtcbiAgICBpZiAodGhpcy5wdXJwb3NlKSB0aGlzLmNvbmZpZy5wdXJwb3NlID0gdGhpcy5wdXJwb3NlO1xuICAgIGlmICh0aGlzLnN0YXR1cykgdGhpcy5jb25maWcuc3RhdHVzID0gdGhpcy5zdGF0dXM7XG4gICAgaWYgKHRoaXMucGFsZXR0ZSkgdGhpcy5jb25maWcucGFsZXR0ZSA9IHRoaXMucGFsZXR0ZTtcbiAgICBpZiAodGhpcy5hcmlhTGFiZWwpIHRoaXMuY29uZmlnLmFyaWFMYWJlbCA9IHRoaXMuYXJpYUxhYmVsO1xuICAgIGlmICghdGhpcy50YWJJbmRleCkgdGhpcy5jb25maWcudGFiSW5kZXggPSAtMTtcblxuICAgIHRoaXMuY2hlY2tMYWJlbFJvdW5kZWQoKTtcbiAgICB0aGlzLmNoZWNrTnVtYmVyKCk7XG5cbiAgICB0aGlzLnRhYkluZGV4ICE9PSB1bmRlZmluZWRcbiAgICAgID8gKHRoaXMuY29uZmlnLnRhYkluZGV4ID0gdGhpcy50YWJJbmRleClcbiAgICAgIDogdW5kZWZpbmVkO1xuICB9XG5cbiAgbmdBZnRlclZpZXdJbml0KCkge1xuICAgIHNldFRpbWVvdXQoKCkgPT4gdGhpcy5jaGVja0xhYmVsTGVuZ3RoKCkpO1xuICB9XG5cbiAgbmdPbkNoYW5nZXMoY2hhbmdlczogU2ltcGxlQ2hhbmdlcykge1xuICAgIHRoaXMuY2hlY2tOdW1iZXIoKTtcbiAgICB0aGlzLmNoZWNrTGFiZWxSb3VuZGVkKCk7XG4gICAgdGhpcy5jaGVja0xhYmVsTGVuZ3RoKCk7XG4gICAgc2V0VGltZW91dCgoKSA9PiB0aGlzLmNoZWNrTGFiZWxMZW5ndGgoKSk7XG4gIH1cblxuICAvLyBDaGVjayBpZiBudW1iZXIgZXhjZWVkcyA5OVxuICBwcml2YXRlIGNoZWNrTnVtYmVyKCkge1xuICAgIGlmIChcbiAgICAgIHRoaXMuY29uZmlnLnR5cGUgPT09ICdudW1iZXInICYmXG4gICAgICB0aGlzLmNvbmZpZz8ubGFiZWwgJiZcbiAgICAgIHRoaXMuY29uZmlnLmxhYmVsID4gOTlcbiAgICApIHtcbiAgICAgIHRoaXMuY29uZmlnLmxhYmVsID0gJzk5Kyc7XG4gICAgfVxuICB9XG5cbiAgLy8gSWYgbGFiZWwgb25seSBoYXZlIDEgY2hhcmFjdGVyLCBpdCBzaG91bGQgYmUgcm91bmRlZFxuICBwcml2YXRlIGNoZWNrTGFiZWxSb3VuZGVkKCkge1xuICAgIGlmICh0eXBlb2YgdGhpcy5jb25maWc/LmxhYmVsID09PSAnc3RyaW5nJykge1xuICAgICAgdGhpcy5yb3VuZGVkID0gdGhpcy5jb25maWcubGFiZWwubGVuZ3RoID09IDEgJiYgIXRoaXMuY29uZmlnLmljb247XG4gICAgfVxuICB9XG5cbiAgLy8gQ2hlY2sgaWYgZGl2IGV4Y2VlZHMgMjAwcHhcbiAgcHJpdmF0ZSBjaGVja0xhYmVsTGVuZ3RoKCkge1xuICAgIGlmICh0aGlzLmNvbmZpZy50eXBlICE9PSAndGV4dCcpIHJldHVybjtcbiAgICAvLyBNYXggMjAwcHggLSBwYWRkaW5nIDhweCB4MlxuICAgIHRoaXMuYWJiciA9IDxib29sZWFuPihcbiAgICAgICh0aGlzLmxhYmVsPy5uYXRpdmVFbGVtZW50Py5vZmZzZXRXaWR0aCAmJlxuICAgICAgICB0aGlzLmxhYmVsPy5uYXRpdmVFbGVtZW50Py5vZmZzZXRXaWR0aCA+IDE4NClcbiAgICApO1xuICB9XG59XG4iLCI8ZGl2XG4gIFtuZ0NsYXNzXT1cIlsnaW5kaWNhdG9yLWNvbnRhaW5lcicsIGNvbmZpZy5zaXplID8/ICcnXVwiXG4gICAgW2F0dHIuYXJpYS1sYWJlbF09XCJcbiAgICAoY29uZmlnLmFyaWFMYWJlbCA/PyAnSW5kaWNhdG9yLkhlYWRpbmcnIHwgdHJhbnNsYXRlKSArXG4gICAgJyAnICtcbiAgICAoY29uZmlnLmxhYmVsID8/ICcnKVxuICBcIlxuICBbdGFiaW5kZXhdPVwiY29uZmlnLnRhYkluZGV4XCJcbiAgcm9sZT1cImdyb3VwXCJcbj5cbiAgPGRpdlxuICAgICpuZ0lmPVwiY29uZmlnLnR5cGUgPT09ICd0ZXh0JyB8fCBjb25maWcudHlwZSA9PT0gJ251bWJlcidcIlxuICAgICNsYWJlbFxuICAgIFtuZ0NsYXNzXT1cIltcbiAgICAgIGNvbmZpZy50eXBlLFxuICAgICAgY29uZmlnLmNhdGVnb3J5LFxuICAgICAgY29uZmlnLnB1cnBvc2UgPT09ICdzdGF0dXMnXG4gICAgICAgID8gRUluZGljYXRvclN0YXR1c1tjb25maWcuc3RhdHVzID8/ICdpbmZvcm1hdGlvbiddXG4gICAgICAgIDogJycsXG4gICAgICBjb25maWcucHVycG9zZSA9PT0gJ3BhbGV0dGUnID8gY29uZmlnLnBhbGV0dGUgOiAnJyxcbiAgICAgIHJvdW5kZWQgPyAncm91bmRlZCcgOiAnJyxcbiAgICAgIGNvbmZpZy5sYWJlbCA9PT0gJzk5KycgPyAnbnVtLWxnJyA6ICcnLFxuICAgICAgYWJiciA/ICdhYmJyJyA6ICcnXG4gICAgXVwiXG4gID5cbiAgICA8aXJjYy1jbC1saWItaWNvblxuICAgICAgKm5nSWY9XCJjb25maWcudHlwZSA9PT0gJ3RleHQnICYmIGNvbmZpZz8uaWNvblwiXG4gICAgICBbY29uZmlnXT1cInsgRkFfa2V5d29yZHM6IGNvbmZpZy5pY29uIH1cIlxuICAgICAgW2F0dHIuc2l6ZV09XCJjb25maWcuc2l6ZVwiXG4gICAgPjwvaXJjYy1jbC1saWItaWNvbj5cbiAgICA8bmctY29udGFpbmVyICpuZ0lmPVwiYWJicjsgZWxzZSBub25BYmJyXCI+XG4gICAgICA8c3BhbiBjbGFzcz1cImFiYnJcIlxuICAgICAgICA+PGFiYnIgW3RpdGxlXT1cImNvbmZpZy5sYWJlbFwiPnt7IGNvbmZpZy5sYWJlbCB9fTwvYWJicj48L3NwYW5cbiAgICAgID5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8bmctdGVtcGxhdGUgI25vbkFiYnI+XG4gICAgICA8c3Bhbj57eyBjb25maWcubGFiZWwgfX08L3NwYW4+XG4gICAgPC9uZy10ZW1wbGF0ZT5cbiAgPC9kaXY+XG4gIDxzcGFuXG4gICAgKm5nSWY9XCJjb25maWcudHlwZSA9PT0gJ2RvdCdcIlxuICAgIFtuZ0NsYXNzXT1cIltcbiAgICAgIGNvbmZpZy5pY29uID8gJ2RvdC1pY29uJyA6ICcnLFxuICAgICAgY29uZmlnLnR5cGUsXG4gICAgICBjb25maWcuY2F0ZWdvcnksXG4gICAgICBjb25maWcucHVycG9zZSA9PT0gJ3N0YXR1cydcbiAgICAgICAgPyBFSW5kaWNhdG9yU3RhdHVzW2NvbmZpZy5zdGF0dXMgPz8gJ2luZm9ybWF0aW9uJ11cbiAgICAgICAgOiAnJyxcbiAgICAgIGNvbmZpZy5wdXJwb3NlID09PSAncGFsZXR0ZScgPyBjb25maWcucGFsZXR0ZSA6ICcnXG4gICAgXVwiXG4gID5cbiAgICA8aXJjYy1jbC1saWItaWNvblxuICAgICAgKm5nSWY9XCJjb25maWc/Lmljb25cIlxuICAgICAgW2NvbmZpZ109XCJ7IEZBX2tleXdvcmRzOiBjb25maWcuaWNvbiB9XCJcbiAgICAgIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICAgID48L2lyY2MtY2wtbGliLWljb24+XG4gIDwvc3Bhbj5cbjwvZGl2PlxuIl19