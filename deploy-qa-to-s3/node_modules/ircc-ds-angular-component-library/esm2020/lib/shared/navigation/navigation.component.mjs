import { Input, ViewChild } from '@angular/core';
import { Component } from '@angular/core';
import * as i0 from "@angular/core";
import * as i1 from "./navigation.service";
import * as i2 from "@angular/common";
import * as i3 from "../icon/icon.component";
import * as i4 from "./nav-item-heading/nav-item-heading.component";
import * as i5 from "./nav-item-nav/nav-item-nav.component";
import * as i6 from "./nav-item-accordion/nav-item-accordion.component";
import * as i7 from "./nav-item-divider/nav-item-divider.component";
import * as i8 from "@ngx-translate/core";
export class navigationComponent {
    constructor(navService, renderer, el) {
        this.navService = navService;
        this.renderer = renderer;
        this.el = el;
        this.id = '';
        this.label = '';
        this.iconLeading = '';
        this.iconTrailing = '';
        //TODO: NavigationItem and all other interfaces must be renamed starting with 'I'
        this.navigationConfig = [];
        this.flattenNavigation = [];
        this.config = {
            id: '',
            label: '',
            iconLeading: '',
            iconTrailing: '',
            size: 'small',
            navigationConfig: [],
            scrolling: false,
            height: '75vh',
            marginTop: 0,
            childrenPadding: true
        };
        this.wrapperFixed = false;
        this.listenerScroll = () => { };
        this.listenerResize = () => { };
        this.isArray = (obj) => {
            return Array.isArray(obj);
        };
        this.arrayOfObject = (obj) => {
            return Object.keys(obj);
        };
        this.getIconsStatus = () => {
            return (this.config &&
                (this.config?.iconLeading || '').length > 0 &&
                (this.config?.iconTrailing || '').length > 0);
        };
        //These are in THIS component, not in it's own. I.e. the buttons in the actual
        //header are not in a child component.
        this.clickIconLeading = (event) => {
            this.navService.navEvent({ id: this.config.id, event: event });
        };
        this.clickIconTrailing = (event) => {
            this.navService.navEvent({ id: this.config.id, event: event });
        };
        this.navigationClass = () => {
            if (((this.config?.iconLeading?.length || ''.length > 0) &&
                this.config?.iconTrailing?.length) ||
                ''.length > 0) {
                return 'header-full';
            }
            else if (this.config?.iconLeading?.length || ''.length > 0) {
                return 'header-iconleading';
            }
            else if (this.config?.iconTrailing?.length || ''.length > 0) {
                return 'header-icontrailing';
            }
            return '';
        };
        this.getHeight = () => {
            this.listenerScroll();
            this.listenerResize();
            if (this.complicatedMaths() === true) {
                this.disableStickyNav();
                this.setScrollableNavigationArea();
                this.listenerResize = this.renderer.listen('window', 'resize', () => {
                    this.setScrollableNavigationArea();
                });
            }
            else if (this.complicatedMaths() === false) {
                this.disableSetScrollableNavigationArea();
                this.setStickyNav();
                this.listenerScroll = this.renderer.listen('window', 'scroll', () => {
                    this.scrolling();
                });
            }
        };
        this.scrolling = () => {
            if (this.scrollTimeout) {
                clearTimeout(this.scrollTimeout);
            }
            this.scrollTimeout = setTimeout((() => {
                this.setStickyNav();
            }).bind(this), 50);
        };
        this.setStickyNav = () => {
            if (window.pageYOffset > this.navigationHeader?.nativeElement.offsetHeight) {
                this.renderer.addClass(this.navigationHeader?.nativeElement, 'position-fixed');
                this.renderer.setStyle(this.navigationHeader?.nativeElement, 'top', `${this.config?.marginTop}px`);
                this.renderer.setStyle(this.navigationAreaScroll?.nativeElement, 'margin-top', this.navigationHeader?.nativeElement.offsetHeight +
                    this.config?.marginTop +
                    'px');
            }
            else {
                this.renderer.removeClass(this.navigationHeader?.nativeElement, 'position-fixed');
                this.renderer.removeStyle(this.navigationHeader?.nativeElement, 'top');
                this.renderer.removeStyle(this.navigationAreaScroll?.nativeElement, 'margin-top');
            }
        };
        this.disableStickyNav = () => {
            this.renderer.removeClass(this.navigationHeader?.nativeElement, 'position-fixed');
            this.renderer.removeStyle(this.navigationHeader?.nativeElement, 'top');
            this.renderer.removeStyle(this.navigationAreaScroll?.nativeElement, 'margin-top');
            this.renderer.removeStyle(this.navigationArea?.nativeElement, 'height');
        };
        this.complicatedMaths = () => {
            let windowheight = window.innerHeight;
            let usableHeight = windowheight -
                (this.navigationHeader?.nativeElement.offsetHeight +
                    this.navigationContentTop?.nativeElement.offsetHeight +
                    this.navigationContentBottom?.nativeElement.offsetHeight);
            return usableHeight > windowheight / 2 ? true : false;
        };
        this.setScrollableNavigationArea = () => {
            this.renderer.setStyle(this.navigation?.nativeElement, 'height', this.config.height);
            this.renderer.setStyle(this.navigation?.nativeElement, 'overflow-y', 'auto');
            this.renderer.setStyle(this.navigation?.nativeElement, 'overflow-x', 'clip');
        };
        this.disableSetScrollableNavigationArea = () => {
            this.renderer.removeStyle(this.navigation?.nativeElement, 'height');
            this.renderer.removeStyle(this.navigation?.nativeElement, 'overflow-y');
            this.renderer.removeStyle(this.navigation?.nativeElement, 'overflow-x');
        };
        this.setIndex = (index) => {
            return (index += 1);
        };
    }
    ngOnInit() {
        this.configSub = this.navService.navConfigObs$.subscribe((response) => {
            this.config = response;
            if (this.config?.childrenPadding != true &&
                this.config?.childrenPadding != false) {
                this.config.childrenPadding = true;
            }
        });
        // Record relative height from top of page for sidenav
        this.wrapperTop = this.el.nativeElement?.getBoundingClientRect().top;
    }
    getPaddingChildrenPadding(index) {
        let classes = '';
        if (this.config?.childrenPadding === true) {
            classes += 'indent-' + index;
        }
        return classes;
    }
    ngAfterViewInit() {
        this.wrapperWidth = this.el.nativeElement.parentElement.offsetWidth;
        if (this.config.scrolling === true) {
            this.getHeight();
            this.renderer.listen('window', 'resize', () => {
                this.getHeight();
                setTimeout(() => {
                    // Update element width upon window resize
                    this.wrapperWidth = this.el.nativeElement.parentElement.offsetWidth;
                });
            });
        }
        if (this.config.fixed) {
            this.renderer.listen('window', 'scroll', () => {
                // Check if navigation top has hit top of viewport
                if (this.wrapperTop) {
                    this.wrapperFixed = this.wrapperTop < window.scrollY;
                }
            });
        }
    }
}
navigationComponent.ɵfac = i0.ɵɵngDeclareFactory({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: navigationComponent, deps: [{ token: i1.NavigationService }, { token: i0.Renderer2 }, { token: i0.ElementRef }], target: i0.ɵɵFactoryTarget.Component });
navigationComponent.ɵcmp = i0.ɵɵngDeclareComponent({ minVersion: "14.0.0", version: "14.2.12", type: navigationComponent, selector: "ircc-cl-lib-navigation", inputs: { id: "id", label: "label", iconLeading: "iconLeading", iconTrailing: "iconTrailing", size: "size", navigationConfig: "navigationConfig" }, viewQueries: [{ propertyName: "navigationHeader", first: true, predicate: ["navigationHeader"], descendants: true }, { propertyName: "navigationContentTop", first: true, predicate: ["navigationContentTop"], descendants: true }, { propertyName: "navigationContentBottom", first: true, predicate: ["navigationContentBottom"], descendants: true }, { propertyName: "navigationArea", first: true, predicate: ["navigationArea"], descendants: true }, { propertyName: "navigationAreaScroll", first: true, predicate: ["navigationAreaScroll"], descendants: true }, { propertyName: "navigation", first: true, predicate: ["navigation"], descendants: true }], ngImport: i0, template: "<div\n  [id]=\"config.id\"\n  [attr.size]=\"config.size\"\n  class=\"lib-navigation\"\n  [ngClass]=\"{ fixed: config.fixed && wrapperFixed }\"\n  [style.max-width]=\"\n    wrapperFixed && wrapperWidth && wrapperWidth > 0\n      ? wrapperWidth + 'px'\n      : 'none'\n  \"\n  #navigation\n>\n  <div\n    class=\"navigation-header\"\n    [class]=\"navigationClass()\"\n    #navigationHeader\n  >\n    <ircc-cl-lib-icon\n      class=\"icon-leading\"\n      [config]=\"{ FA_keywords: config?.iconLeading || '' }\"\n      (click)=\"clickIconLeading(config.id + '_icon_leading')\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n    <ng-container *ngIf=\"config?.label\">\n      <h3>{{ config?.label || '' | translate }}</h3>\n    </ng-container>\n    <ircc-cl-lib-icon\n      [id]=\"config.id + '_icon_trailing'\"\n      class=\"icon-trailing\"\n      [attr.size]=\"config.size\"\n      [config]=\"{ FA_keywords: config?.iconTrailing || '' }\"\n      (click)=\"clickIconTrailing(config.id + '_icon_trailing')\"\n    ></ircc-cl-lib-icon>\n  </div>\n\n  <div #navigationAreaScroll>\n    <!-- ignore-->\n    <!-- prettier-ignore -->\n    <div class=\"navigation-content-top\" #navigationContentTop ><ng-content select=\"[navigationContentTop]\"></ng-content></div>\n\n    <!-- TODO: Document this like crazy - recursive templating is cool, but EXTREMELY unusual -->\n    <div\n      class=\"navigation-area\"\n      #navigationArea\n    >\n      <ul class=\"parent-navigation\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            recursiveListTmpl;\n            context: { list: this.config.navigationConfig, index: 0 }\n          \"\n        ></ng-container>\n      </ul>\n    </div>\n\n    <ng-template\n      #recursiveListTmpl\n      let-list=\"list\"\n      let-index=\"index\"\n    >\n      <li *ngFor=\"let item of list\">\n        <ng-container [ngSwitch]=\"item.type\">\n          <!--Type Heading-->\n          <ng-container *ngSwitchCase=\"'heading'\"\n            ><ircc-cl-lib-nav-header\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul></ircc-cl-lib-nav-header\n          ></ng-container>\n\n          <!--Type Link-->\n          <ng-container *ngSwitchCase=\"'link'\">\n            <ircc-cl-lib-nav-item\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul></ircc-cl-lib-nav-item\n          ></ng-container>\n\n          <!--Type Accordion-->\n          <ng-container *ngSwitchCase=\"'accordion'\">\n            <ircc-cl-lib-nav-accordion\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul\n            ></ircc-cl-lib-nav-accordion>\n          </ng-container>\n\n          <ng-container *ngSwitchCase=\"'divider'\">\n            <ircc-cl-lib-nav-divider\n              [attr.size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul\n            ></ircc-cl-lib-nav-divider>\n          </ng-container>\n        </ng-container>\n      </li>\n    </ng-template>\n\n    <!-- prettier-ignore -->\n    <div class=\"navigation-content-bottom\" #navigationContentBottom><ng-content select=\"[navigationContentBottom]\"></ng-content></div>\n  </div>\n</div>\n", dependencies: [{ kind: "directive", type: i2.NgClass, selector: "[ngClass]", inputs: ["class", "ngClass"] }, { kind: "directive", type: i2.NgForOf, selector: "[ngFor][ngForOf]", inputs: ["ngForOf", "ngForTrackBy", "ngForTemplate"] }, { kind: "directive", type: i2.NgIf, selector: "[ngIf]", inputs: ["ngIf", "ngIfThen", "ngIfElse"] }, { kind: "directive", type: i2.NgTemplateOutlet, selector: "[ngTemplateOutlet]", inputs: ["ngTemplateOutletContext", "ngTemplateOutlet", "ngTemplateOutletInjector"] }, { kind: "directive", type: i2.NgSwitch, selector: "[ngSwitch]", inputs: ["ngSwitch"] }, { kind: "directive", type: i2.NgSwitchCase, selector: "[ngSwitchCase]", inputs: ["ngSwitchCase"] }, { kind: "component", type: i3.IconComponent, selector: "ircc-cl-lib-icon", inputs: ["config", "ariaLabel", "FA_keywords", "size"] }, { kind: "component", type: i4.navItemHeadingComponent, selector: "ircc-cl-lib-nav-header", inputs: ["config", "id", "label", "iconLeading", "children", "size", "leftPadding", "bold"] }, { kind: "component", type: i5.navItemNavComponent, selector: "ircc-cl-lib-nav-item", inputs: ["config", "id", "size", "indicator"] }, { kind: "component", type: i6.navItemAccordionComponent, selector: "ircc-cl-lib-nav-accordion", inputs: ["config", "id", "open", "label", "size", "iconLeading", "leftPadding", "bold"] }, { kind: "component", type: i7.navItemDividerComponent, selector: "ircc-cl-lib-nav-divider", inputs: ["config", "id"] }, { kind: "pipe", type: i8.TranslatePipe, name: "translate" }], preserveWhitespaces: true });
i0.ɵɵngDeclareClassMetadata({ minVersion: "12.0.0", version: "14.2.12", ngImport: i0, type: navigationComponent, decorators: [{
            type: Component,
            args: [{ selector: 'ircc-cl-lib-navigation', template: "<div\n  [id]=\"config.id\"\n  [attr.size]=\"config.size\"\n  class=\"lib-navigation\"\n  [ngClass]=\"{ fixed: config.fixed && wrapperFixed }\"\n  [style.max-width]=\"\n    wrapperFixed && wrapperWidth && wrapperWidth > 0\n      ? wrapperWidth + 'px'\n      : 'none'\n  \"\n  #navigation\n>\n  <div\n    class=\"navigation-header\"\n    [class]=\"navigationClass()\"\n    #navigationHeader\n  >\n    <ircc-cl-lib-icon\n      class=\"icon-leading\"\n      [config]=\"{ FA_keywords: config?.iconLeading || '' }\"\n      (click)=\"clickIconLeading(config.id + '_icon_leading')\"\n      [attr.size]=\"config.size\"\n    ></ircc-cl-lib-icon>\n    <ng-container *ngIf=\"config?.label\">\n      <h3>{{ config?.label || '' | translate }}</h3>\n    </ng-container>\n    <ircc-cl-lib-icon\n      [id]=\"config.id + '_icon_trailing'\"\n      class=\"icon-trailing\"\n      [attr.size]=\"config.size\"\n      [config]=\"{ FA_keywords: config?.iconTrailing || '' }\"\n      (click)=\"clickIconTrailing(config.id + '_icon_trailing')\"\n    ></ircc-cl-lib-icon>\n  </div>\n\n  <div #navigationAreaScroll>\n    <!-- ignore-->\n    <!-- prettier-ignore -->\n    <div class=\"navigation-content-top\" #navigationContentTop ><ng-content select=\"[navigationContentTop]\"></ng-content></div>\n\n    <!-- TODO: Document this like crazy - recursive templating is cool, but EXTREMELY unusual -->\n    <div\n      class=\"navigation-area\"\n      #navigationArea\n    >\n      <ul class=\"parent-navigation\">\n        <ng-container\n          *ngTemplateOutlet=\"\n            recursiveListTmpl;\n            context: { list: this.config.navigationConfig, index: 0 }\n          \"\n        ></ng-container>\n      </ul>\n    </div>\n\n    <ng-template\n      #recursiveListTmpl\n      let-list=\"list\"\n      let-index=\"index\"\n    >\n      <li *ngFor=\"let item of list\">\n        <ng-container [ngSwitch]=\"item.type\">\n          <!--Type Heading-->\n          <ng-container *ngSwitchCase=\"'heading'\"\n            ><ircc-cl-lib-nav-header\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul></ircc-cl-lib-nav-header\n          ></ng-container>\n\n          <!--Type Link-->\n          <ng-container *ngSwitchCase=\"'link'\">\n            <ircc-cl-lib-nav-item\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul></ircc-cl-lib-nav-item\n          ></ng-container>\n\n          <!--Type Accordion-->\n          <ng-container *ngSwitchCase=\"'accordion'\">\n            <ircc-cl-lib-nav-accordion\n              [attr.size]=\"config.size\"\n              [size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul\n            ></ircc-cl-lib-nav-accordion>\n          </ng-container>\n\n          <ng-container *ngSwitchCase=\"'divider'\">\n            <ircc-cl-lib-nav-divider\n              [attr.size]=\"config.size\"\n              [config]=\"item\"\n            >\n              <ul\n                *ngIf=\"item.children.length > 0\"\n                class=\"child-navigation\"\n                [class]=\"getPaddingChildrenPadding(index)\"\n              >\n                <ng-container\n                  *ngTemplateOutlet=\"\n                    recursiveListTmpl;\n                    context: { list: item.children, index: setIndex(index) }\n                  \"\n                ></ng-container></ul\n            ></ircc-cl-lib-nav-divider>\n          </ng-container>\n        </ng-container>\n      </li>\n    </ng-template>\n\n    <!-- prettier-ignore -->\n    <div class=\"navigation-content-bottom\" #navigationContentBottom><ng-content select=\"[navigationContentBottom]\"></ng-content></div>\n  </div>\n</div>\n" }]
        }], ctorParameters: function () { return [{ type: i1.NavigationService }, { type: i0.Renderer2 }, { type: i0.ElementRef }]; }, propDecorators: { navigationHeader: [{
                type: ViewChild,
                args: ['navigationHeader', { static: false }]
            }], navigationContentTop: [{
                type: ViewChild,
                args: ['navigationContentTop', { static: false }]
            }], navigationContentBottom: [{
                type: ViewChild,
                args: ['navigationContentBottom', { static: false }]
            }], navigationArea: [{
                type: ViewChild,
                args: ['navigationArea', { static: false }]
            }], navigationAreaScroll: [{
                type: ViewChild,
                args: ['navigationAreaScroll', { static: false }]
            }], navigation: [{
                type: ViewChild,
                args: ['navigation', { static: false }]
            }], id: [{
                type: Input
            }], label: [{
                type: Input
            }], iconLeading: [{
                type: Input
            }], iconTrailing: [{
                type: Input
            }], size: [{
                type: Input
            }], navigationConfig: [{
                type: Input
            }] } });
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoibmF2aWdhdGlvbi5jb21wb25lbnQuanMiLCJzb3VyY2VSb290IjoiIiwic291cmNlcyI6WyIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnQtbGliL3NyYy9saWIvc2hhcmVkL25hdmlnYXRpb24vbmF2aWdhdGlvbi5jb21wb25lbnQudHMiLCIuLi8uLi8uLi8uLi8uLi8uLi9jb21wb25lbnQtbGliL3NyYy9saWIvc2hhcmVkL25hdmlnYXRpb24vbmF2aWdhdGlvbi5jb21wb25lbnQuaHRtbCJdLCJuYW1lcyI6W10sIm1hcHBpbmdzIjoiQUFBQSxPQUFPLEVBSUwsS0FBSyxFQUlMLFNBQVMsRUFDVixNQUFNLGVBQWUsQ0FBQztBQUN2QixPQUFPLEVBQUUsU0FBUyxFQUFVLE1BQU0sZUFBZSxDQUFDOzs7Ozs7Ozs7O0FBVWxELE1BQU0sT0FBTyxtQkFBbUI7SUFrRDlCLFlBQ1UsVUFBNkIsRUFDN0IsUUFBbUIsRUFDbkIsRUFBYztRQUZkLGVBQVUsR0FBVixVQUFVLENBQW1CO1FBQzdCLGFBQVEsR0FBUixRQUFRLENBQVc7UUFDbkIsT0FBRSxHQUFGLEVBQUUsQ0FBWTtRQWhDZixPQUFFLEdBQVcsRUFBRSxDQUFDO1FBQ2hCLFVBQUssR0FBVyxFQUFFLENBQUM7UUFDbkIsZ0JBQVcsR0FBVyxFQUFFLENBQUM7UUFDekIsaUJBQVksR0FBVyxFQUFFLENBQUM7UUFFbkMsaUZBQWlGO1FBQ3hFLHFCQUFnQixHQUEyQixFQUFFLENBQUM7UUFFdkQsc0JBQWlCLEdBQTJCLEVBQUUsQ0FBQztRQUMvQyxXQUFNLEdBQXNCO1lBQzFCLEVBQUUsRUFBRSxFQUFFO1lBQ04sS0FBSyxFQUFFLEVBQUU7WUFDVCxXQUFXLEVBQUUsRUFBRTtZQUNmLFlBQVksRUFBRSxFQUFFO1lBQ2hCLElBQUksRUFBRSxPQUFPO1lBQ2IsZ0JBQWdCLEVBQUUsRUFBRTtZQUNwQixTQUFTLEVBQUUsS0FBSztZQUNoQixNQUFNLEVBQUUsTUFBTTtZQUNkLFNBQVMsRUFBRSxDQUFDO1lBQ1osZUFBZSxF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QUs7Z0JBQ0csV0FBVztzQkFBbkIsS0FBSztnQkFDRyxZQUFZO3NCQUFwQixLQUFLO2dCQUNHLElBQUk7c0JBQVosS0FBSztnQkFFRyxnQkFBZ0I7c0JBQXhCLEtBQUsiLCJzb3VyY2VzQ29udGVudCI6WyJpbXBvcnQge1xuICBBZnRlclZpZXdJbml0LFxuICBFbGVtZW50UmVmLFxuICBIb3N0TGlzdGVuZXIsXG4gIElucHV0LFxuICBPbkNoYW5nZXMsXG4gIFJlbmRlcmVyMixcbiAgU2ltcGxlQ2hhbmdlcyxcbiAgVmlld0NoaWxkXG59IGZyb20gJ0Bhbmd1bGFyL2NvcmUnO1xuaW1wb3J0IHsgQ29tcG9uZW50LCBPbkluaXQgfSBmcm9tICdAYW5ndWxhci9jb3JlJztcbmltcG9ydCB7IERTU2l6ZXMgfSBmcm9tICcuLi8uLi8uLi9zaGFyZWQvY29uc3RhbnRzL2psLWNvbXBvbmVudHMuY29uc3RhbnRzJztcbmltcG9ydCB7IElOYXZpZ2F0aW9uSXRlbSwgSU5hdmlnYXRpb25Db25maWcgfSBmcm9tICcuL25hdmlnYXRpb24udHlwZXMnO1xuaW1wb3J0IHsgU3Vic2NyaXB0aW9uIH0gZnJvbSAncnhqcyc7XG5pbXBvcnQgeyBOYXZpZ2F0aW9uU2VydmljZSB9IGZyb20gJy4vbmF2aWdhdGlvbi5zZXJ2aWNlJztcblxuQENvbXBvbmVudCh7XG4gIHNlbGVjdG9yOiAnaXJjYy1jbC1saWItbmF2aWdhdGlvbicsXG4gIHRlbXBsYXRlVXJsOiAnLi9uYXZpZ2F0aW9uLmNvbXBvbmVudC5odG1sJ1xufSlcbmV4cG9ydCBjbGFzcyBuYXZpZ2F0aW9uQ29tcG9uZW50IGltcGxlbWVudHMgT25Jbml0LCBBZnRlclZpZXdJbml0IHtcbiAgQFZpZXdDaGlsZCgnbmF2aWdhdGlvbkhlYWRlcicsIHsgc3RhdGljOiBmYWxzZSB9KSBuYXZpZ2F0aW9uSGVhZGVyOlxuICAgIHwgRWxlbWVudFJlZlxuICAgIHwgdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ25hdmlnYXRpb25Db250ZW50VG9wJywgeyBzdGF0aWM6IGZhbHNlIH0pIG5hdmlnYXRpb25Db250ZW50VG9wOlxuICAgIHwgRWxlbWVudFJlZlxuICAgIHwgdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ25hdmlnYXRpb25Db250ZW50Qm90dG9tJywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIG5hdmlnYXRpb25Db250ZW50Qm90dG9tOiBFbGVtZW50UmVmIHwgdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ25hdmlnYXRpb25BcmVhJywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIG5hdmlnYXRpb25BcmVhOiBFbGVtZW50UmVmIHwgdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ25hdmlnYXRpb25BcmVhU2Nyb2xsJywgeyBzdGF0aWM6IGZhbHNlIH0pXG4gIG5hdmlnYXRpb25BcmVhU2Nyb2xsOiBFbGVtZW50UmVmIHwgdW5kZWZpbmVkO1xuXG4gIEBWaWV3Q2hpbGQoJ25hdmlnYXRpb24nLCB7IHN0YXRpYzogZmFsc2UgfSlcbiAgbmF2aWdhdGlvbjogRWxlbWVudFJlZiB8IHVuZGVmaW5lZDtcblxuICBASW5wdXQoKSBpZDogc3RyaW5nID0gJyc7XG4gIEBJbnB1dCgpIGxhYmVsOiBzdHJpbmcgPSAnJztcbiAgQElucHV0KCkgaWNvbkxlYWRpbmc6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSBpY29uVHJhaWxpbmc6IHN0cmluZyA9ICcnO1xuICBASW5wdXQoKSBzaXplOiBrZXlvZiB0eXBlb2YgRFNTaXplcyB8IHVuZGVmaW5lZDtcbiAgLy9UT0RPOiBOYXZpZ2F0aW9uSXRlbSBhbmQgYWxsIG90aGVyIGludGVyZmFjZXMgbXVzdCBiZSByZW5hbWVkIHN0YXJ0aW5nIHdpdGggJ0knXG4gIEBJbnB1dCgpIG5hdmlnYXRpb25Db25maWc6IEFycmF5PElOYXZpZ2F0aW9uSXRlbT4gPSBbXTtcblxuICBmbGF0dGVuTmF2aWdhdGlvbjogQXJyYXk8SU5hdmlnYXRpb25JdGVtPiA9IFtdO1xuICBjb25maWc6IElOYXZpZ2F0aW9uQ29uZmlnID0ge1xuICAgIGlkOiAnJyxcbiAgICBsYWJlbDogJycsXG4gICAgaWNvbkxlYWRpbmc6ICcnLFxuICAgIGljb25UcmFpbGluZzogJycsXG4gICAgc2l6ZTogJ3NtYWxsJyxcbiAgICBuYXZpZ2F0aW9uQ29uZmlnOiBbXSxcbiAgICBzY3JvbGxpbmc6IGZhbHNlLFxuICAgIGhlaWdodDogJzc1dmgnLFxuICAgIG1hcmdpblRvcDogMCxcbiAgICBjaGlsZHJlblBhZGRpbmc6IHRydWVcbiAgfTtcbiAgY29uZmlnU3ViPzogU3Vic2NyaXB0aW9uO1xuICBzY3JvbGxUaW1lb3V0OiBhbnk7XG4gIHdyYXBwZXJUb3A/OiBudW1iZXI7IC8vIFJlbGF0aXZlIGhlaWdodCBmcm9tIHRvcCBvZiBuYXYgdG8gdG9wIG9mIHBhZ2UgaW4gcHhcbiAgd3JhcHBlcldpZHRoPzogbnVtYmVyOyAvLyBXaWR0aCBvZiB3cmFwcGVyIGluIHB4XG4gIHdyYXBwZXJGaXhlZDogYm9vbGVhbiA9IGZhbHNlO1xuXG4gIGxpc3RlbmVyU2Nyb2xsID0gKCkgPT4ge307XG4gIGxpc3RlbmVyUmVzaXplID0gKCkgPT4ge307XG4gIGNvbnN0cnVjdG9yKFxuICAgIHByaXZhdGUgbmF2U2VydmljZTogTmF2aWdhdGlvblNlcnZpY2UsXG4gICAgcHJpdmF0ZSByZW5kZXJlcjogUmVuZGVyZXIyLFxuICAgIHByaXZhdGUgZWw6IEVsZW1lbnRSZWZcbiAgKSB7fVxuXG4gIG5nT25Jbml0KCkge1xuICAgIHRoaXMuY29uZmlnU3ViID0gdGhpcy5uYXZTZXJ2aWNlLm5hdkNvbmZpZ09icyQuc3Vic2NyaWJlKChyZXNwb25zZSkgPT4ge1xuICAgICAgdGhpcy5jb25maWcgPSByZXNwb25zZTtcbiAgICAgIGlmIChcbiAgICAgICAgdGhpcy5jb25maWc/LmNoaWxkcmVuUGFkZGluZyAhPSB0cnVlICYmXG4gICAgICAgIHRoaXMuY29uZmlnPy5jaGlsZHJlblBhZGRpbmcgIT0gZmFsc2VcbiAgICAgICkge1xuICAgICAgICB0aGlzLmNvbmZpZy5jaGlsZHJlblBhZGRpbmcgPSB0cnVlO1xuICAgICAgfVxuICAgIH0pO1xuICAgIC8vIFJlY29yZCByZWxhdGl2ZSBoZWlnaHQgZnJvbSB0b3Agb2YgcGFnZSBmb3Igc2lkZW5hdlxuICAgIHRoaXMud3JhcHBlclRvcCA9IHRoaXMuZWwubmF0aXZlRWxlbWVudD8uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xuICB9XG5cbiAgZ2V0UGFkZGluZ0NoaWxkcmVuUGFkZGluZyhpbmRleDogbnVtYmVyKTogc3RyaW5nIHtcbiAgICBsZXQgY2xhc3NlcyA9ICcnO1xuXG4gICAgaWYgKHRoaXMuY29uZmlnPy5jaGlsZHJlblBhZGRpbmcgPT09IHRydWUpIHtcbiAgICAgIGNsYXNzZXMgKz0gJ2luZGVudC0nICsgaW5kZXg7XG4gICAgfVxuXG4gICAgcmV0dXJuIGNsYXNzZXM7XG4gIH1cblxuICBpc0FycmF5ID0gKG9iajogYW55KSA9PiB7XG4gICAgcmV0dXJuIEFycmF5LmlzQXJyYXkob2JqKTtcbiAgfTtcblxuICBhcnJheU9mT2JqZWN0ID0gKG9iajogYW55KSA9PiB7XG4gICAgcmV0dXJuIE9iamVjdC5rZXlzKG9iaik7XG4gIH07XG5cbiAgZ2V0SWNvbnNTdGF0dXMgPSAoKSA9PiB7XG4gICAgcmV0dXJuIChcbiAgICAgIHRoaXMuY29uZmlnICYmXG4gICAgICAodGhpcy5jb25maWc/Lmljb25MZWFkaW5nIHx8ICcnKS5sZW5ndGggPiAwICYmXG4gICAgICAodGhpcy5jb25maWc/Lmljb25UcmFpbGluZyB8fCAnJykubGVuZ3RoID4gMFxuICAgICk7XG4gIH07XG5cbiAgLy9UaGVzZSBhcmUgaW4gVEhJUyBjb21wb25lbnQsIG5vdCBpbiBpdCdzIG93bi4gSS5lLiB0aGUgYnV0dG9ucyBpbiB0aGUgYWN0dWFsXG4gIC8vaGVhZGVyIGFyZSBub3QgaW4gYSBjaGlsZCBjb21wb25lbnQuXG4gIGNsaWNrSWNvbkxlYWRpbmcgPSAoZXZlbnQ6IGFueSkgPT4ge1xuICAgIHRoaXMubmF2U2VydmljZS5uYXZFdmVudCh7IGlkOiB0aGlzLmNvbmZpZy5pZCwgZXZlbnQ6IGV2ZW50IH0pO1xuICB9O1xuICBjbGlja0ljb25UcmFpbGluZyA9IChldmVudDogYW55KSA9PiB7XG4gICAgdGhpcy5uYXZTZXJ2aWNlLm5hdkV2ZW50KHsgaWQ6IHRoaXMuY29uZmlnLmlkLCBldmVudDogZXZlbnQgfSk7XG4gIH07XG5cbiAgbmF2aWdhdGlvbkNsYXNzID0gKCk6IHN0cmluZyA9PiB7XG4gICAgaWYgKFxuICAgICAgKCh0aGlzLmNvbmZpZz8uaWNvbkxlYWRpbmc/Lmxlbmd0aCB8fCAnJy5sZW5ndGggPiAwKSAmJlxuICAgICAgICB0aGlzLmNvbmZpZz8uaWNvblRyYWlsaW5nPy5sZW5ndGgpIHx8XG4gICAgICAnJy5sZW5ndGggPiAwXG4gICAgKSB7XG4gICAgICByZXR1cm4gJ2hlYWRlci1mdWxsJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnPy5pY29uTGVhZGluZz8ubGVuZ3RoIHx8ICcnLmxlbmd0aCA+IDApIHtcbiAgICAgIHJldHVybiAnaGVhZGVyLWljb25sZWFkaW5nJztcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29uZmlnPy5pY29uVHJhaWxpbmc/Lmxlbmd0aCB8fCAnJy5sZW5ndGggPiAwKSB7XG4gICAgICByZXR1cm4gJ2hlYWRlci1pY29udHJhaWxpbmcnO1xuICAgIH1cblxuICAgIHJldHVybiAnJztcbiAgfTtcblxuICBuZ0FmdGVyVmlld0luaXQoKSB7XG4gICAgdGhpcy53cmFwcGVyV2lkdGggPSB0aGlzLmVsLm5hdGl2ZUVsZW1lbnQucGFyZW50RWxlbWVudC5vZmZzZXRXaWR0aDtcbiAgICBpZiAodGhpcy5jb25maWcuc2Nyb2xsaW5nID09PSB0cnVlKSB7XG4gICAgICB0aGlzLmdldEhlaWdodCgpO1xuICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oJ3dpbmRvdycsICdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuZ2V0SGVpZ2h0KCk7XG4gICAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgICAgICAgIC8vIFVwZGF0ZSBlbGVtZW50IHdpZHRoIHVwb24gd2luZG93IHJlc2l6ZVxuICAgICAgICAgIHRoaXMud3JhcHBlcldpZHRoID0gdGhpcy5lbC5uYXRpdmVFbGVtZW50LnBhcmVudEVsZW1lbnQub2Zmc2V0V2lkdGg7XG4gICAgICAgIH0pO1xuICAgICAgfSk7XG4gICAgfVxuICAgIGlmICh0aGlzLmNvbmZpZy5maXhlZCkge1xuICAgICAgdGhpcy5yZW5kZXJlci5saXN0ZW4oJ3dpbmRvdycsICdzY3JvbGwnLCAoKSA9PiB7XG4gICAgICAgIC8vIENoZWNrIGlmIG5hdmlnYXRpb24gdG9wIGhhcyBoaXQgdG9wIG9mIHZpZXdwb3J0XG4gICAgICAgIGlmICh0aGlzLndyYXBwZXJUb3ApIHtcbiAgICAgICAgICB0aGlzLndyYXBwZXJGaXhlZCA9IHRoaXMud3JhcHBlclRvcCA8IHdpbmRvdy5zY3JvbGxZO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICB9XG4gIH1cblxuICBnZXRIZWlnaHQgPSAoKSA9PiB7XG4gICAgdGhpcy5saXN0ZW5lclNjcm9sbCgpO1xuICAgIHRoaXMubGlzdGVuZXJSZXNpemUoKTtcblxuICAgIGlmICh0aGlzLmNvbXBsaWNhdGVkTWF0aHMoKSA9PT0gdHJ1ZSkge1xuICAgICAgdGhpcy5kaXNhYmxlU3RpY2t5TmF2KCk7XG4gICAgICB0aGlzLnNldFNjcm9sbGFibGVOYXZpZ2F0aW9uQXJlYSgpO1xuXG4gICAgICB0aGlzLmxpc3RlbmVyUmVzaXplID0gdGhpcy5yZW5kZXJlci5saXN0ZW4oJ3dpbmRvdycsICdyZXNpemUnLCAoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U2Nyb2xsYWJsZU5hdmlnYXRpb25BcmVhKCk7XG4gICAgICB9KTtcbiAgICB9IGVsc2UgaWYgKHRoaXMuY29tcGxpY2F0ZWRNYXRocygpID09PSBmYWxzZSkge1xuICAgICAgdGhpcy5kaXNhYmxlU2V0U2Nyb2xsYWJsZU5hdmlnYXRpb25BcmVhKCk7XG4gICAgICB0aGlzLnNldFN0aWNreU5hdigpO1xuICAgICAgdGhpcy5saXN0ZW5lclNjcm9sbCA9IHRoaXMucmVuZGVyZXIubGlzdGVuKCd3aW5kb3cnLCAnc2Nyb2xsJywgKCkgPT4ge1xuICAgICAgICB0aGlzLnNjcm9sbGluZygpO1xuICAgICAgfSk7XG4gICAgfVxuICB9O1xuXG4gIHNjcm9sbGluZyA9ICgpOiB2b2lkID0+IHtcbiAgICBpZiAodGhpcy5zY3JvbGxUaW1lb3V0KSB7XG4gICAgICBjbGVhclRpbWVvdXQodGhpcy5zY3JvbGxUaW1lb3V0KTtcbiAgICB9XG4gICAgdGhpcy5zY3JvbGxUaW1lb3V0ID0gc2V0VGltZW91dChcbiAgICAgICgoKSA9PiB7XG4gICAgICAgIHRoaXMuc2V0U3RpY2t5TmF2KCk7XG4gICAgICB9KS5iaW5kKHRoaXMpLFxuICAgICAgNTBcbiAgICApO1xuICB9O1xuXG4gIHNldFN0aWNreU5hdiA9ICgpID0+IHtcbiAgICBpZiAoXG4gICAgICB3aW5kb3cucGFnZVlPZmZzZXQgPiB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0XG4gICAgKSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLmFkZENsYXNzKFxuICAgICAgICB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdwb3NpdGlvbi1maXhlZCdcbiAgICAgICk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgICB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICd0b3AnLFxuICAgICAgICBgJHt0aGlzLmNvbmZpZz8ubWFyZ2luVG9wfXB4YFxuICAgICAgKTtcblxuICAgICAgdGhpcy5yZW5kZXJlci5zZXRTdHlsZShcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uQXJlYVNjcm9sbD8ubmF0aXZlRWxlbWVudCxcbiAgICAgICAgJ21hcmdpbi10b3AnLFxuICAgICAgICB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICtcbiAgICAgICAgICB0aGlzLmNvbmZpZz8ubWFyZ2luVG9wICtcbiAgICAgICAgICAncHgnXG4gICAgICApO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZUNsYXNzKFxuICAgICAgICB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAgICdwb3NpdGlvbi1maXhlZCdcbiAgICAgICk7XG4gICAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMubmF2aWdhdGlvbkhlYWRlcj8ubmF0aXZlRWxlbWVudCwgJ3RvcCcpO1xuICAgICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZShcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uQXJlYVNjcm9sbD8ubmF0aXZlRWxlbWVudCxcbiAgICAgICAgJ21hcmdpbi10b3AnXG4gICAgICApO1xuICAgIH1cbiAgfTtcblxuICBkaXNhYmxlU3RpY2t5TmF2ID0gKCkgPT4ge1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlQ2xhc3MoXG4gICAgICB0aGlzLm5hdmlnYXRpb25IZWFkZXI/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAncG9zaXRpb24tZml4ZWQnXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMubmF2aWdhdGlvbkhlYWRlcj8ubmF0aXZlRWxlbWVudCwgJ3RvcCcpO1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUoXG4gICAgICB0aGlzLm5hdmlnYXRpb25BcmVhU2Nyb2xsPy5uYXRpdmVFbGVtZW50LFxuICAgICAgJ21hcmdpbi10b3AnXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnJlbW92ZVN0eWxlKHRoaXMubmF2aWdhdGlvbkFyZWE/Lm5hdGl2ZUVsZW1lbnQsICdoZWlnaHQnKTtcbiAgfTtcblxuICBjb21wbGljYXRlZE1hdGhzID0gKCk6IGJvb2xlYW4gPT4ge1xuICAgIGxldCB3aW5kb3doZWlnaHQgPSB3aW5kb3cuaW5uZXJIZWlnaHQ7XG5cbiAgICBsZXQgdXNhYmxlSGVpZ2h0ID1cbiAgICAgIHdpbmRvd2hlaWdodCAtXG4gICAgICAodGhpcy5uYXZpZ2F0aW9uSGVhZGVyPy5uYXRpdmVFbGVtZW50Lm9mZnNldEhlaWdodCArXG4gICAgICAgIHRoaXMubmF2aWdhdGlvbkNvbnRlbnRUb3A/Lm5hdGl2ZUVsZW1lbnQub2Zmc2V0SGVpZ2h0ICtcbiAgICAgICAgdGhpcy5uYXZpZ2F0aW9uQ29udGVudEJvdHRvbT8ubmF0aXZlRWxlbWVudC5vZmZzZXRIZWlnaHQpO1xuXG4gICAgcmV0dXJuIHVzYWJsZUhlaWdodCA+IHdpbmRvd2hlaWdodCAvIDIgPyB0cnVlIDogZmFsc2U7XG4gIH07XG5cbiAgc2V0U2Nyb2xsYWJsZU5hdmlnYXRpb25BcmVhID0gKCkgPT4ge1xuICAgIHRoaXMucmVuZGVyZXIuc2V0U3R5bGUoXG4gICAgICB0aGlzLm5hdmlnYXRpb24/Lm5hdGl2ZUVsZW1lbnQsXG4gICAgICAnaGVpZ2h0JyxcbiAgICAgIHRoaXMuY29uZmlnLmhlaWdodFxuICAgICk7XG5cbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgdGhpcy5uYXZpZ2F0aW9uPy5uYXRpdmVFbGVtZW50LFxuICAgICAgJ292ZXJmbG93LXknLFxuICAgICAgJ2F1dG8nXG4gICAgKTtcbiAgICB0aGlzLnJlbmRlcmVyLnNldFN0eWxlKFxuICAgICAgdGhpcy5uYXZpZ2F0aW9uPy5uYXRpdmVFbGVtZW50LFxuICAgICAgJ292ZXJmbG93LXgnLFxuICAgICAgJ2NsaXAnXG4gICAgKTtcbiAgfTtcblxuICBkaXNhYmxlU2V0U2Nyb2xsYWJsZU5hdmlnYXRpb25BcmVhID0gKCkgPT4ge1xuICAgIHRoaXMucmVuZGVyZXIucmVtb3ZlU3R5bGUodGhpcy5uYXZpZ2F0aW9uPy5uYXRpdmVFbGVtZW50LCAnaGVpZ2h0Jyk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLm5hdmlnYXRpb24/Lm5hdGl2ZUVsZW1lbnQsICdvdmVyZmxvdy15Jyk7XG4gICAgdGhpcy5yZW5kZXJlci5yZW1vdmVTdHlsZSh0aGlzLm5hdmlnYXRpb24/Lm5hdGl2ZUVsZW1lbnQsICdvdmVyZmxvdy14Jyk7XG4gIH07XG5cbiAgc2V0SW5kZXggPSAoaW5kZXg6IG51bWJlcik6IG51bWJlciA9PiB7XG4gICAgcmV0dXJuIChpbmRleCArPSAxKTtcbiAgfTtcbn1cbiIsIjxkaXZcbiAgW2lkXT1cImNvbmZpZy5pZFwiXG4gIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICBjbGFzcz1cImxpYi1uYXZpZ2F0aW9uXCJcbiAgW25nQ2xhc3NdPVwieyBmaXhlZDogY29uZmlnLmZpeGVkICYmIHdyYXBwZXJGaXhlZCB9XCJcbiAgW3N0eWxlLm1heC13aWR0aF09XCJcbiAgICB3cmFwcGVyRml4ZWQgJiYgd3JhcHBlcldpZHRoICYmIHdyYXBwZXJXaWR0aCA+IDBcbiAgICAgID8gd3JhcHBlcldpZHRoICsgJ3B4J1xuICAgICAgOiAnbm9uZSdcbiAgXCJcbiAgI25hdmlnYXRpb25cbj5cbiAgPGRpdlxuICAgIGNsYXNzPVwibmF2aWdhdGlvbi1oZWFkZXJcIlxuICAgIFtjbGFzc109XCJuYXZpZ2F0aW9uQ2xhc3MoKVwiXG4gICAgI25hdmlnYXRpb25IZWFkZXJcbiAgPlxuICAgIDxpcmNjLWNsLWxpYi1pY29uXG4gICAgICBjbGFzcz1cImljb24tbGVhZGluZ1wiXG4gICAgICBbY29uZmlnXT1cInsgRkFfa2V5d29yZHM6IGNvbmZpZz8uaWNvbkxlYWRpbmcgfHwgJycgfVwiXG4gICAgICAoY2xpY2spPVwiY2xpY2tJY29uTGVhZGluZyhjb25maWcuaWQgKyAnX2ljb25fbGVhZGluZycpXCJcbiAgICAgIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICAgID48L2lyY2MtY2wtbGliLWljb24+XG4gICAgPG5nLWNvbnRhaW5lciAqbmdJZj1cImNvbmZpZz8ubGFiZWxcIj5cbiAgICAgIDxoMz57eyBjb25maWc/LmxhYmVsIHx8ICcnIHwgdHJhbnNsYXRlIH19PC9oMz5cbiAgICA8L25nLWNvbnRhaW5lcj5cbiAgICA8aXJjYy1jbC1saWItaWNvblxuICAgICAgW2lkXT1cImNvbmZpZy5pZCArICdfaWNvbl90cmFpbGluZydcIlxuICAgICAgY2xhc3M9XCJpY29uLXRyYWlsaW5nXCJcbiAgICAgIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICAgICAgW2NvbmZpZ109XCJ7IEZBX2tleXdvcmRzOiBjb25maWc/Lmljb25UcmFpbGluZyB8fCAnJyB9XCJcbiAgICAgIChjbGljayk9XCJjbGlja0ljb25UcmFpbGluZyhjb25maWcuaWQgKyAnX2ljb25fdHJhaWxpbmcnKVwiXG4gICAgPjwvaXJjYy1jbC1saWItaWNvbj5cbiAgPC9kaXY+XG5cbiAgPGRpdiAjbmF2aWdhdGlvbkFyZWFTY3JvbGw+XG4gICAgPCEtLSBpZ25vcmUtLT5cbiAgICA8IS0tIHByZXR0aWVyLWlnbm9yZSAtLT5cbiAgICA8ZGl2IGNsYXNzPVwibmF2aWdhdGlvbi1jb250ZW50LXRvcFwiICNuYXZpZ2F0aW9uQ29udGVudFRvcCA+PG5nLWNvbnRlbnQgc2VsZWN0PVwiW25hdmlnYXRpb25Db250ZW50VG9wXVwiPjwvbmctY29udGVudD48L2Rpdj5cblxuICAgIDwhLS0gVE9ETzogRG9jdW1lbnQgdGhpcyBsaWtlIGNyYXp5IC0gcmVjdXJzaXZlIHRlbXBsYXRpbmcgaXMgY29vbCwgYnV0IEVYVFJFTUVMWSB1bnVzdWFsIC0tPlxuICAgIDxkaXZcbiAgICAgIGNsYXNzPVwibmF2aWdhdGlvbi1hcmVhXCJcbiAgICAgICNuYXZpZ2F0aW9uQXJlYVxuICAgID5cbiAgICAgIDx1bCBjbGFzcz1cInBhcmVudC1uYXZpZ2F0aW9uXCI+XG4gICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgcmVjdXJzaXZlTGlzdFRtcGw7XG4gICAgICAgICAgICBjb250ZXh0OiB7IGxpc3Q6IHRoaXMuY29uZmlnLm5hdmlnYXRpb25Db25maWcsIGluZGV4OiAwIH1cbiAgICAgICAgICBcIlxuICAgICAgICA+PC9uZy1jb250YWluZXI+XG4gICAgICA8L3VsPlxuICAgIDwvZGl2PlxuXG4gICAgPG5nLXRlbXBsYXRlXG4gICAgICAjcmVjdXJzaXZlTGlzdFRtcGxcbiAgICAgIGxldC1saXN0PVwibGlzdFwiXG4gICAgICBsZXQtaW5kZXg9XCJpbmRleFwiXG4gICAgPlxuICAgICAgPGxpICpuZ0Zvcj1cImxldCBpdGVtIG9mIGxpc3RcIj5cbiAgICAgICAgPG5nLWNvbnRhaW5lciBbbmdTd2l0Y2hdPVwiaXRlbS50eXBlXCI+XG4gICAgICAgICAgPCEtLVR5cGUgSGVhZGluZy0tPlxuICAgICAgICAgIDxuZy1jb250YWluZXIgKm5nU3dpdGNoQ2FzZT1cIidoZWFkaW5nJ1wiXG4gICAgICAgICAgICA+PGlyY2MtY2wtbGliLW5hdi1oZWFkZXJcbiAgICAgICAgICAgICAgW2F0dHIuc2l6ZV09XCJjb25maWcuc2l6ZVwiXG4gICAgICAgICAgICAgIFtzaXplXT1cImNvbmZpZy5zaXplXCJcbiAgICAgICAgICAgICAgW2NvbmZpZ109XCJpdGVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDBcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiY2hpbGQtbmF2aWdhdGlvblwiXG4gICAgICAgICAgICAgICAgW2NsYXNzXT1cImdldFBhZGRpbmdDaGlsZHJlblBhZGRpbmcoaW5kZXgpXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZUxpc3RUbXBsO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiB7IGxpc3Q6IGl0ZW0uY2hpbGRyZW4sIGluZGV4OiBzZXRJbmRleChpbmRleCkgfVxuICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+PC9uZy1jb250YWluZXI+PC91bD48L2lyY2MtY2wtbGliLW5hdi1oZWFkZXJcbiAgICAgICAgICA+PC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICA8IS0tVHlwZSBMaW5rLS0+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2xpbmsnXCI+XG4gICAgICAgICAgICA8aXJjYy1jbC1saWItbmF2LWl0ZW1cbiAgICAgICAgICAgICAgW2F0dHIuc2l6ZV09XCJjb25maWcuc2l6ZVwiXG4gICAgICAgICAgICAgIFtzaXplXT1cImNvbmZpZy5zaXplXCJcbiAgICAgICAgICAgICAgW2NvbmZpZ109XCJpdGVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDBcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiY2hpbGQtbmF2aWdhdGlvblwiXG4gICAgICAgICAgICAgICAgW2NsYXNzXT1cImdldFBhZGRpbmdDaGlsZHJlblBhZGRpbmcoaW5kZXgpXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZUxpc3RUbXBsO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiB7IGxpc3Q6IGl0ZW0uY2hpbGRyZW4sIGluZGV4OiBzZXRJbmRleChpbmRleCkgfVxuICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+PC9uZy1jb250YWluZXI+PC91bD48L2lyY2MtY2wtbGliLW5hdi1pdGVtXG4gICAgICAgICAgPjwvbmctY29udGFpbmVyPlxuXG4gICAgICAgICAgPCEtLVR5cGUgQWNjb3JkaW9uLS0+XG4gICAgICAgICAgPG5nLWNvbnRhaW5lciAqbmdTd2l0Y2hDYXNlPVwiJ2FjY29yZGlvbidcIj5cbiAgICAgICAgICAgIDxpcmNjLWNsLWxpYi1uYXYtYWNjb3JkaW9uXG4gICAgICAgICAgICAgIFthdHRyLnNpemVdPVwiY29uZmlnLnNpemVcIlxuICAgICAgICAgICAgICBbc2l6ZV09XCJjb25maWcuc2l6ZVwiXG4gICAgICAgICAgICAgIFtjb25maWddPVwiaXRlbVwiXG4gICAgICAgICAgICA+XG4gICAgICAgICAgICAgIDx1bFxuICAgICAgICAgICAgICAgICpuZ0lmPVwiaXRlbS5jaGlsZHJlbi5sZW5ndGggPiAwXCJcbiAgICAgICAgICAgICAgICBjbGFzcz1cImNoaWxkLW5hdmlnYXRpb25cIlxuICAgICAgICAgICAgICAgIFtjbGFzc109XCJnZXRQYWRkaW5nQ2hpbGRyZW5QYWRkaW5nKGluZGV4KVwiXG4gICAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgICA8bmctY29udGFpbmVyXG4gICAgICAgICAgICAgICAgICAqbmdUZW1wbGF0ZU91dGxldD1cIlxuICAgICAgICAgICAgICAgICAgICByZWN1cnNpdmVMaXN0VG1wbDtcbiAgICAgICAgICAgICAgICAgICAgY29udGV4dDogeyBsaXN0OiBpdGVtLmNoaWxkcmVuLCBpbmRleDogc2V0SW5kZXgoaW5kZXgpIH1cbiAgICAgICAgICAgICAgICAgIFwiXG4gICAgICAgICAgICAgICAgPjwvbmctY29udGFpbmVyPjwvdWxcbiAgICAgICAgICAgID48L2lyY2MtY2wtbGliLW5hdi1hY2NvcmRpb24+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG5cbiAgICAgICAgICA8bmctY29udGFpbmVyICpuZ1N3aXRjaENhc2U9XCInZGl2aWRlcidcIj5cbiAgICAgICAgICAgIDxpcmNjLWNsLWxpYi1uYXYtZGl2aWRlclxuICAgICAgICAgICAgICBbYXR0ci5zaXplXT1cImNvbmZpZy5zaXplXCJcbiAgICAgICAgICAgICAgW2NvbmZpZ109XCJpdGVtXCJcbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAgPHVsXG4gICAgICAgICAgICAgICAgKm5nSWY9XCJpdGVtLmNoaWxkcmVuLmxlbmd0aCA+IDBcIlxuICAgICAgICAgICAgICAgIGNsYXNzPVwiY2hpbGQtbmF2aWdhdGlvblwiXG4gICAgICAgICAgICAgICAgW2NsYXNzXT1cImdldFBhZGRpbmdDaGlsZHJlblBhZGRpbmcoaW5kZXgpXCJcbiAgICAgICAgICAgICAgPlxuICAgICAgICAgICAgICAgIDxuZy1jb250YWluZXJcbiAgICAgICAgICAgICAgICAgICpuZ1RlbXBsYXRlT3V0bGV0PVwiXG4gICAgICAgICAgICAgICAgICAgIHJlY3Vyc2l2ZUxpc3RUbXBsO1xuICAgICAgICAgICAgICAgICAgICBjb250ZXh0OiB7IGxpc3Q6IGl0ZW0uY2hpbGRyZW4sIGluZGV4OiBzZXRJbmRleChpbmRleCkgfVxuICAgICAgICAgICAgICAgICAgXCJcbiAgICAgICAgICAgICAgICA+PC9uZy1jb250YWluZXI+PC91bFxuICAgICAgICAgICAgPjwvaXJjYy1jbC1saWItbmF2LWRpdmlkZXI+XG4gICAgICAgICAgPC9uZy1jb250YWluZXI+XG4gICAgICAgIDwvbmctY29udGFpbmVyPlxuICAgICAgPC9saT5cbiAgICA8L25nLXRlbXBsYXRlPlxuXG4gICAgPCEtLSBwcmV0dGllci1pZ25vcmUgLS0+XG4gICAgPGRpdiBjbGFzcz1cIm5hdmlnYXRpb24tY29udGVudC1ib3R0b21cIiAjbmF2aWdhdGlvbkNvbnRlbnRCb3R0b20+PG5nLWNvbnRlbnQgc2VsZWN0PVwiW25hdmlnYXRpb25Db250ZW50Qm90dG9tXVwiPjwvbmctY29udGVudD48L2Rpdj5cbiAgPC9kaXY+XG48L2Rpdj5cbiJdfQ==